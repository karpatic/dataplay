---

title: From ACS Download to Gif 

keywords: fastai
sidebar: home_sidebar

summary: "In this tutorial, we run the full gambit, from downloading acs data to creating map gifs across several years of data"
description: "In this tutorial, we run the full gambit, from downloading acs data to creating map gifs across several years of data"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: notebooks/05_ACS_From_Download_To_Gif.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This Coding Notebook is the <strong>fifth</strong> in a series.</p>
<p>An Interactive version can be found here <a href="https://colab.research.google.com/github/karpatic/dataplay/blob/master/notebooks/05_ACS_From_Download_To_Gif.ipynb" target="_parent"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"/></a>.</p>
<p>This colab and more can be found on our <a href="https://karpatic.github.io/dataplay/">webpage</a>.</p>
<ul>
<li><p>Content covered in previous tutorials will be used in later tutorials.</p>
</li>
<li><p><strong>New code and or  information <em>should</em> have explanations and or descriptions</strong> attached.</p>
</li>
<li><p>Concepts or code covered in previous tutorials will be used without being explaining in entirety.</p>
</li>
<li><p><strong>If content can not be found in the current tutorial and is not covered in previous tutorials, please let me know.</strong></p>
</li>
<li><p>This notebook has been optimized for Google Colabs ran on a Chrome Browser.</p>
</li>
<li><p>Statements found in the index page on view expressed, responsibility, errors and ommissions, use at risk, and licensing  extend throughout the tutorial.</p>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Introduction">Introduction<a class="anchor-link" href="#Introduction"> </a></h2><p>In this colab</p>
<ol>
<li>We will programmatically download data from the American Community Survey (ACS)</li>
</ol>
<ul>
<li><ul>
<li>ACS data are estimates come from survey respondents across 5 year </li>
</ul>
</li>
<li><ul>
<li>ACS data comes in at a tract level geographic granularity</li>
</ul>
</li>
<li><ul>
<li>Our examples will primarily use table B19001, Baltimore City 2017 estimates</li>
</ul>
</li>
</ul>
<ol>
<li>We will rework the datasets to be human friendly</li>
<li>We will create Vital Signs Indicators from calculations using these datasets </li>
<li>We will create convenience functions to wrap up everything we have learnt</li>
</ol>
<p>Median Household Income is just one of the many operations that may perfrom on the data using publicly available code found in our github codebase.</p>
<p>This colab and more can be found at <a href="https://gist.github.com/bniajfi">https://gist.github.com/bniajfi</a></p>
<p>Developers Resource: <a href="https://www.census.gov/developers/">https://www.census.gov/developers/</a></p>
<p>ACS API: <a href="https://www.census.gov/data/developers/data-sets.html">https://www.census.gov/data/developers/data-sets.html</a></p>
<p><strong>*please note</strong></p>
<ul>
<li>A table of contents is provided in the menu to the left.</li>
<li>And, that this notebook has been optimized for Google Colabs ran on a Chrome Browser. </li>
<li>While still fully usable, non-critical section of code (eg. Python Magics and HTML) may break if used in a different enviornment.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="About-The-Census-Data">About The Census Data<a class="anchor-link" href="#About-The-Census-Data"> </a></h2><p><strong>Census and ACS Boundary Terminology</strong>:</p>
<p>Each of the bolded words in the content below are identifiable through a Geographic Reference Code.</p>
<ul>
<li>A census block is the smallest unit of measurement used by the Census</li>
<li>Information by census <strong>block</strong> is only available decenially (i.e. not ACS data)</li>
<li><strong>Block groups</strong> are the next smallest unit of measurement used by the census and are composed of aggregate census blocks</li>
<li>Census <strong>tracts</strong> are composed of block groups and are the next largest unit of measurement used by the ACS</li>
<li><strong>County</strong>, <strong>city</strong> and census <strong>designated places</strong> are composed of Tracts</li>
</ul>
<p>For more information on Geographic Reference Codes, refer to the table of contents for the section on that matter.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Lets-Get-Started:">Lets Get Started:<a class="anchor-link" href="#Lets-Get-Started:"> </a></h2><p><strong>Instructions:</strong> Read all text and execute all code in order.</p>
<p><strong>How to execute code:</strong></p>
<ul>
<li>Locate labels taking the form: 'Run This Cell: (descriptionOfFunction)'</li>
<li>Left of this text you will see an open bracket [ ], possibly with a number inside it.</li>
<li><ul>
<li>Hovering over the brackets will reveal a play button. Click the button to execute code.</li>
</ul>
</li>
</ul>
<p>To see the code you are executing, double click the label.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@title Run This Cell: View User Path (html)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Import-Python-Modules">Import Python Modules<a class="anchor-link" href="#Import-Python-Modules"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You will need to run this next box first in order for any of the code after it to work</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@title Run This Cell: Import Modules</span>

<span class="c1"># Install the Widgets Module. </span>
<span class="c1"># Colabs does not locally provide this Python Library</span>
<span class="c1"># The &#39;!&#39; is a special prefix used in colabs when talking to the terminal</span>
<span class="o">!</span>pip install -U -q ipywidgets
<span class="o">!</span>pip install geopandas

<span class="c1"># Once installed we need to import and configure the Widgets</span>
<span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>
<span class="o">!</span>jupyter nbextension <span class="nb">enable</span> --py widgetsnbextension
<span class="kn">from</span> <span class="nn">IPython.core.interactiveshell</span> <span class="k">import</span> <span class="n">InteractiveShell</span>
<span class="n">InteractiveShell</span><span class="o">.</span><span class="n">ast_node_interactivity</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span>
<span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>
<span class="kn">from</span> <span class="nn">ipywidgets</span> <span class="k">import</span> <span class="n">interact</span><span class="p">,</span> <span class="n">interact_manual</span>

<span class="c1"># Used 4 Importing Data</span>
<span class="kn">import</span> <span class="nn">urllib.request</span> <span class="k">as</span> <span class="nn">urllib</span> 
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="k">import</span> <span class="n">urlencode</span> 
<span class="c1"># This Prevents Timeouts when Importing</span>
<span class="kn">import</span> <span class="nn">socket</span> 
<span class="n">socket</span><span class="o">.</span><span class="n">setdefaulttimeout</span><span class="p">(</span><span class="mf">10.0</span><span class="p">)</span>

<span class="c1"># Pandas Data Manipulation Libraries</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="c1"># Show entire column widths</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_colwidth&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># 4 Working with Json Data</span>
<span class="kn">import</span> <span class="nn">json</span> 
<span class="c1"># 4 Data Processing</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="c1"># 4 Reading Json Data into Pandas</span>
<span class="kn">from</span> <span class="nn">pandas.io.json</span> <span class="k">import</span> <span class="n">json_normalize</span>

<span class="c1"># 4 exporting data as CSV</span>
<span class="kn">import</span> <span class="nn">csv</span>


<span class="c1"># Geo-Formatting</span>
<span class="c1"># Postgres-Conversion</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">from</span> <span class="nn">geopandas</span> <span class="k">import</span> <span class="n">GeoDataFrame</span>
<span class="kn">import</span> <span class="nn">psycopg2</span><span class="o">,</span><span class="nn">pandas</span><span class="o">,</span><span class="nn">numpy</span>
<span class="kn">from</span> <span class="nn">shapely</span> <span class="k">import</span> <span class="n">wkb</span>
<span class="kn">from</span> <span class="nn">shapely.wkt</span> <span class="k">import</span> <span class="n">loads</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="c1"># In case file is KML</span>
<span class="kn">import</span> <span class="nn">fiona</span>
<span class="n">fiona</span><span class="o">.</span><span class="n">drvsupport</span><span class="o">.</span><span class="n">supported_drivers</span><span class="p">[</span><span class="s1">&#39;kml&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;rw&#39;</span> <span class="c1"># enable KML support which is disabled by default</span>
<span class="n">fiona</span><span class="o">.</span><span class="n">drvsupport</span><span class="o">.</span><span class="n">supported_drivers</span><span class="p">[</span><span class="s1">&#39;KML&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;rw&#39;</span> <span class="c1"># enable KML support which is disabled by default</span>

<span class="c1"># https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-line-file.2010.html</span>
<span class="c1"># https://www.census.gov/cgi-bin/geo/shapefiles/index.php?year=2010&amp;layergroup=Census+Tracts</span>

<span class="c1"># load libraries</span>
<span class="c1">#from shapely.wkt import loads</span>
<span class="c1">#from pandas import ExcelWriter</span>
<span class="c1">#from pandas import ExcelFile</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">imageio</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Explore-Table-Directories">Explore Table Directories<a class="anchor-link" href="#Explore-Table-Directories"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The Census bureau provides 4 distinct dataset types: Detailed Tables, Subject Tables, Data Profiles, Comparison Profiles</p>
<p>We will only be explore the Detailed and Subject tables in this section</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Explore-the-Detailed-Table-Directory">Explore the Detailed Table Directory<a class="anchor-link" href="#Explore-the-Detailed-Table-Directory"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Retrieve and search available ACS datasets through the ACS's table directory.</p>
<p>The table directory contains TableId's and Descriptions for each datatable the ACS provides.</p>
<p>By running the next cell, an interactive searchbox will filter the directory for keywords within the description.</p>
<p>Be sure to grab the TableId once you find a table with a description of interest.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@title Run This Cell: Import Dataset Directory</span>

<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://api.census.gov/data/2017/acs/acs5/groups/&#39;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;groups&#39;</span><span class="p">]</span>
<span class="n">metaDataTable</span> <span class="o">=</span> <span class="n">json_normalize</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">metaDataTable</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="c1">#--------------------</span>
<span class="c1"># SEARCH BOX 1: This reliably produces a searhbox. </span>
<span class="c1"># The ell must be reran for every query.</span>
<span class="c1">#--------------------</span>
<span class="n">description</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Search ACS Table Directory by Keyword: &quot;</span><span class="p">)</span>
<span class="n">metaDataTable</span><span class="p">[</span> <span class="n">metaDataTable</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">description</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span> <span class="p">]</span>

<span class="c1">#--------------------</span>
<span class="c1"># SEARCH BOX 2: FOR CHROME USERS: </span>
<span class="c1"># Commenting out the code above and running the code </span>
<span class="c1"># below will update the searchbox in real time.</span>
<span class="c1">#--------------------</span>
<span class="c1"># @interact</span>
<span class="c1"># def tableExplorer(description=&#39;family&#39;): </span>
<span class="c1">#  return metaDataTable[ metaDataTable[&#39;description&#39;].str.contains(description.upper()) ]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Once you a table from the explorer has been picked, you can inspect its column names in the next part.</p>
<p>This will help ensure it has the data you need!</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@title Run This Cell: Interactive Table Lookup</span>

<span class="kn">import</span> <span class="nn">json</span> 
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span> 
<span class="kn">from</span> <span class="nn">pandas.io.json</span> <span class="k">import</span> <span class="n">json_normalize</span>

<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="c1">#--------------------</span>
<span class="c1"># SEARCH BOX 1: This reliably produces a searchbox. </span>
<span class="c1"># The ell must be reran for every query.</span>
<span class="c1">#--------------------</span>
<span class="n">tableId</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Please enter a Table ID to inspect: &quot;</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;https://api.census.gov/data/2017/acs/acs5/groups/</span><span class="si">{tableId}</span><span class="s1">.json&#39;</span>
<span class="n">metaDataTable</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="n">metaDataTable</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> 
<span class="n">metaDataTable</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">json_normalize</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">metaDataTable</span><span class="p">[</span><span class="s1">&#39;variables&#39;</span><span class="p">]),</span> <span class="n">metaDataTable</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]</span> <span class="p">,</span> <span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">metaDataTable</span> <span class="o">=</span> <span class="n">metaDataTable</span><span class="p">[[</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="s1">&#39;concept&#39;</span><span class="p">]]</span>
<span class="n">metaDataTable</span> <span class="o">=</span> <span class="n">metaDataTable</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;concept&#39;</span><span class="p">])</span>
<span class="n">metaDataTable</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Explore-the-Subject-Table-Directory">Explore the Subject Table Directory<a class="anchor-link" href="#Explore-the-Subject-Table-Directory"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The Data Structure we recieve is different than the prior table.</p>
<p>Intake and processing is different as a result</p>
<p>Now lets explore what we got, just like before.</p>
<p>Only difference is that the column names are automatically included in this query.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@title Run This Cell: Interactive Dataset Directory</span>


<span class="c1"># Note the json representation</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://api.census.gov/data/2017/acs/acs5/subject/variables.json&#39;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="c1"># Decode the url response as json</span>
<span class="c1"># https://docs.python.org/3/library/json.html</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="c1"># the json object contains all its information within attribute &#39;variables&#39; </span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;variables&#39;</span><span class="p">]</span>

<span class="c1"># Process  by flattening the raw json data</span>
<span class="n">objArr</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
  <span class="n">value</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">key</span>
  <span class="n">objArr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

<span class="c1"># Normalize semi-structured JSON data into a flat table.</span>
<span class="n">metaDataTable</span> <span class="o">=</span> <span class="n">json_normalize</span><span class="p">(</span><span class="n">objArr</span><span class="p">)</span>
<span class="c1"># Set the column &#39;name&#39; as an index.</span>
<span class="n">metaDataTable</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># Reduce the directory to only contain these attributes</span>
<span class="n">metaDataTable</span> <span class="o">=</span> <span class="n">metaDataTable</span><span class="p">[</span> <span class="p">[</span><span class="s1">&#39;attributes&#39;</span><span class="p">,</span> <span class="s1">&#39;concept&#39;</span><span class="p">,</span> <span class="s1">&#39;group&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;limit&#39;</span><span class="p">,</span> <span class="s1">&#39;predicateType&#39;</span> <span class="p">]</span> <span class="p">]</span>



<span class="c1">#--------------------</span>
<span class="c1"># SEARCH BOX 1: This reliably produces a searhbox. </span>
<span class="c1"># The ell must be reran for every query.</span>
<span class="c1">#--------------------</span>
<span class="n">concept</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Search ACS Subject Table Directory by Keyword&quot;</span><span class="p">)</span>
<span class="n">metaDataTable</span><span class="p">[</span> <span class="n">metaDataTable</span><span class="p">[</span><span class="s1">&#39;concept&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">concept</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="p">]</span>

<span class="c1">#--------------------</span>
<span class="c1"># SEARCH BOX 2: FOR CHROME USERS: </span>
<span class="c1"># Commenting out the code above and running the code </span>
<span class="c1"># below will update the searchbox in real time.</span>
<span class="c1">#--------------------</span>
<span class="c1">#@interact</span>
<span class="c1">#def subjectExplorer(concept=&#39;transport&#39;): </span>
<span class="c1">#  return metaDataTable[ metaDataTable[&#39;concept&#39;].str.contains(concept.upper(), na=False) ]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Geographic-Reference-Codes">Geographic Reference Codes<a class="anchor-link" href="#Geographic-Reference-Codes"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In order to successfully pull data, a Census State and County Code must be provided.</p>
<p>The code herin is configured by default to pull data on Baltimore City, MD and its constituent Tracts.</p>
<p><strong>In order to find your State and County code:</strong></p>
<hr>
<p>Either</p>
<p>A)  Click the link: <a href="https://geocoding.geo.census.gov/geocoder/geographies/address">https://geocoding.geo.census.gov/geocoder/geographies/address</a> where upon entering a unique address you can locate state and county codes under the associated values 'Counties' and 'State'</p>
<p>OR</p>
<p>B) Conversly, click <a href="https://www.census.gov/geographies/reference-files/time-series/geo/tallies.html">https://www.census.gov/geographies/reference-files/time-series/geo/tallies.html</a></p>
<ul>
<li>The Geographies mainpage contains a lot of data assets.</li>
<li>The link to these tallies was located by accessing the geographical references subdirectory of the geographies mainpage and then filtered for publications made on the year 2010 (We are using the 2010 census boundaries)</li>
<li>Once clicked, simply scroll down to where you find the header 'Tallies of Geographic Entities By State'</li>
<li>Enter your state and press enter.</li>
<li>You will be redirected to a plain text file that will contain all the information on your state and its counties. </li>
</ul>
<hr>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Get-Table-Data">Get Table Data<a class="anchor-link" href="#Get-Table-Data"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Hopefully, by now you know which data table you would like to download!</p>
<p>This next section will do that for you.</p>
<p>Running the cells below will will 'Create' our download function</p>
<p>Function Notes (In depth notes are provided as comments in the code):</p>
<ul>
<li><p>This is the function that will retrieve the datatables!</p>
</li>
<li><p>Accepts parameters (state, county, tract, tableId, year, saveAcs)</p>
</li>
<li><p>Before we retrieve the actual data, we want the table's metadata.</p>
</li>
<li><p>This metadata will be used as a crosswalk to replace the awkward column names</p>
</li>
<li><p>If this is not done, only a column ID would denote each column. not human readable.</p>
</li>
<li><p>County totals are included automatically as 'tract 010000'.</p>
</li>
<li><p>The County total is not the sum of all other tracts but a seperate, indendent and unique query.</p>
</li>
<li><p>Finally, we will download the data in two different formats if desired.</p>
</li>
<li><p>If we choose to save the data, we save it with the Table IDs + ColumnNames, and once without the TableIDs.</p>
</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># @title Run This Cell: Create retrieve_acs_data()</span>

<span class="c1">#File: retrieveAcsData.py</span>
<span class="c1">#Author: Charles Karpati</span>
<span class="c1">#Date: 1/9/19</span>
<span class="c1">#Section: Bnia</span>
<span class="c1">#Email: karpati1@umbc.edu</span>
<span class="c1">#Description:</span>
<span class="c1">#This file returns ACS data given an ID and Year</span>
<span class="c1"># The county total is given a tract of &#39;010000&#39;</span>

<span class="c1">#def main():</span>
<span class="c1">#purpose: Retrieves ACS data from the web</span>
<span class="c1">#input: ID</span>
<span class="c1">#output: Acs Data. Prints to ../../data/2_cleaned/acs/</span>
<span class="n">dictionary</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="k">def</span> <span class="nf">retrieve_acs_data</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">county</span><span class="p">,</span> <span class="n">tract</span><span class="p">,</span> <span class="n">tableId</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">saveAcs</span><span class="p">):</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">vals</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">keys1</span><span class="o">=</span><span class="n">keys2</span><span class="o">=</span><span class="n">keys3</span><span class="o">=</span><span class="n">keys4</span><span class="o">=</span><span class="n">keys5</span><span class="o">=</span><span class="n">keys6</span><span class="o">=</span><span class="n">keys7</span><span class="o">=</span><span class="n">keys8</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
    <span class="n">keyCount</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Called in addKeys(), Will create the final URL for readIn()</span>
    <span class="c1"># These are parameters used in the API URL Query</span>
    <span class="c1"># This query will retrieve the census tracts</span>
    <span class="k">def</span> <span class="nf">getParams</span><span class="p">(</span><span class="n">keys</span><span class="p">):</span> <span class="k">return</span> <span class="p">{</span>
        <span class="s1">&#39;get&#39;</span><span class="p">:</span> <span class="s1">&#39;NAME&#39;</span><span class="o">+</span><span class="n">keys</span><span class="p">,</span>
        <span class="s1">&#39;for&#39;</span><span class="p">:</span> <span class="s1">&#39;tract:&#39;</span><span class="o">+</span><span class="n">tract</span><span class="p">,</span>
        <span class="s1">&#39;in&#39;</span><span class="p">:</span> <span class="s1">&#39;state:&#39;</span><span class="o">+</span><span class="n">state</span><span class="o">+</span><span class="s1">&#39; county:&#39;</span><span class="o">+</span><span class="n">county</span><span class="p">,</span>
        <span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="s1">&#39;829bf6f2e037372acbba32ba5731647c5127fdb0&#39;</span>
      <span class="p">}</span>
    <span class="c1"># Baltimore City data is best retrieved seperatly rather than as an aggregate of its constituent tracts</span>
    <span class="k">def</span> <span class="nf">getBCityParams</span><span class="p">(</span><span class="n">keys</span><span class="p">):</span> <span class="k">return</span> <span class="p">{</span>
        <span class="s1">&#39;get&#39;</span><span class="p">:</span> <span class="s1">&#39;NAME&#39;</span><span class="o">+</span><span class="n">keys</span><span class="p">,</span>
        <span class="s1">&#39;for&#39;</span><span class="p">:</span> <span class="s1">&#39;county:&#39;</span><span class="o">+</span><span class="n">county</span><span class="p">,</span>
        <span class="s1">&#39;in&#39;</span><span class="p">:</span> <span class="s1">&#39;state:&#39;</span><span class="o">+</span><span class="n">state</span><span class="p">,</span>
        <span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="s1">&#39;829bf6f2e037372acbba32ba5731647c5127fdb0&#39;</span>
      <span class="p">}</span>
    <span class="c1"># Called in AddKeys(). Requests data by url and preformats it.</span>
    <span class="k">def</span> <span class="nf">readIn</span><span class="p">(</span> <span class="n">url</span> <span class="p">):</span>
        <span class="n">tbl</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">)</span>
        <span class="n">tbl</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">tbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">tbl</span> 

    <span class="c1"># Called by retrieveAcsData. </span>
    <span class="c1"># Creates a url and retrieve the data</span>
    <span class="c1"># Then appends the city values as tract &#39;010000&#39;</span>
    <span class="c1"># Finaly it merges and returns the tract and city totals.</span>
    <span class="k">def</span> <span class="nf">addKeys</span><span class="p">(</span> <span class="n">table</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
        <span class="c1"># Get Tract and City Records For Specific Columns</span>
        <span class="n">table2</span> <span class="o">=</span> <span class="n">readIn</span><span class="p">(</span> <span class="n">base</span><span class="o">+</span><span class="n">urlencode</span><span class="p">(</span><span class="n">getParams</span><span class="p">(</span><span class="n">params</span><span class="p">))</span> <span class="p">)</span>
        <span class="n">table3</span> <span class="o">=</span> <span class="n">readIn</span><span class="p">(</span> <span class="n">base</span><span class="o">+</span><span class="n">urlencode</span><span class="p">(</span><span class="n">getBCityParams</span><span class="p">(</span><span class="n">params</span><span class="p">))</span> <span class="p">)</span>
        <span class="n">table3</span><span class="p">[</span><span class="s1">&#39;tract&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;010000&#39;</span>
        <span class="c1"># Concatenate the Records</span>
        <span class="n">table2</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">table2</span><span class="p">,</span> <span class="n">table3</span><span class="p">],</span> <span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">table2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">table2</span><span class="p">,</span> <span class="n">table3</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1"># Merge to Master Table</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">table2</span><span class="p">,</span>  <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> 
                         <span class="n">left_on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;NAME&quot;</span><span class="p">,</span><span class="s2">&quot;state&quot;</span><span class="p">,</span><span class="s2">&quot;county&quot;</span><span class="p">,</span><span class="s2">&quot;tract&quot;</span><span class="p">],</span> 
                         <span class="n">right_on</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;NAME&quot;</span><span class="p">,</span><span class="s2">&quot;state&quot;</span><span class="p">,</span><span class="s2">&quot;county&quot;</span><span class="p">,</span><span class="s2">&quot;tract&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">table</span>
    
    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="c1"># Step 1)</span>
    <span class="c1"># Retrieve a Meta Data Table Describing the Content of the Table</span>
    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://api.census.gov/data/20&#39;</span><span class="o">+</span><span class="n">year</span><span class="o">+</span><span class="s1">&#39;/acs/acs5/groups/&#39;</span><span class="o">+</span><span class="n">tableId</span><span class="o">+</span><span class="s1">&#39;.json&#39;</span>
    <span class="n">metaDataTable</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">)</span>
    
    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="c1"># Step 2)</span>
    <span class="c1"># Createa a Dictionary using the Meta Data Table</span>
    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="c1"># Multiple Queries may be Required.</span>
    <span class="c1"># Max columns returned from any given query is 50.</span>
    <span class="c1"># For that reasons bin the Columns into Groups of 50.</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">metaDataTable</span><span class="p">[</span><span class="s1">&#39;variables&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">key</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span> <span class="o">==</span> <span class="s1">&#39;E&#39;</span><span class="p">:</span>
        <span class="n">keyCount</span> <span class="o">=</span> <span class="n">keyCount</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">keyCount</span> <span class="o">&lt;</span> <span class="mi">40</span> <span class="p">:</span> <span class="n">keys1</span> <span class="o">=</span> <span class="n">keys1</span><span class="o">+</span><span class="s1">&#39;,&#39;</span><span class="o">+</span><span class="n">key</span>
        <span class="k">elif</span> <span class="n">keyCount</span> <span class="o">&lt;</span> <span class="mi">80</span> <span class="p">:</span> <span class="n">keys2</span> <span class="o">=</span> <span class="n">keys2</span><span class="o">+</span><span class="s1">&#39;,&#39;</span><span class="o">+</span><span class="n">key</span>
        <span class="k">elif</span> <span class="n">keyCount</span> <span class="o">&lt;</span> <span class="mi">120</span> <span class="p">:</span> <span class="n">keys3</span> <span class="o">=</span> <span class="n">keys3</span><span class="o">+</span><span class="s1">&#39;,&#39;</span><span class="o">+</span><span class="n">key</span>
        <span class="k">elif</span> <span class="n">keyCount</span> <span class="o">&lt;</span> <span class="mi">160</span> <span class="p">:</span> <span class="n">keys4</span> <span class="o">=</span> <span class="n">keys4</span><span class="o">+</span><span class="s1">&#39;,&#39;</span><span class="o">+</span><span class="n">key</span>
        <span class="k">elif</span> <span class="n">keyCount</span> <span class="o">&lt;</span> <span class="mi">200</span> <span class="p">:</span> <span class="n">keys5</span> <span class="o">=</span> <span class="n">keys5</span><span class="o">+</span><span class="s1">&#39;,&#39;</span><span class="o">+</span><span class="n">key</span>
        <span class="k">elif</span> <span class="n">keyCount</span> <span class="o">&lt;</span> <span class="mi">240</span> <span class="p">:</span> <span class="n">keys6</span> <span class="o">=</span> <span class="n">keys6</span><span class="o">+</span><span class="s1">&#39;,&#39;</span><span class="o">+</span><span class="n">key</span>
        <span class="k">elif</span> <span class="n">keyCount</span> <span class="o">&lt;</span> <span class="mi">280</span> <span class="p">:</span> <span class="n">keys7</span> <span class="o">=</span> <span class="n">keys7</span><span class="o">+</span><span class="s1">&#39;,&#39;</span><span class="o">+</span><span class="n">key</span>
        <span class="k">elif</span> <span class="n">keyCount</span> <span class="o">&lt;</span> <span class="mi">320</span> <span class="p">:</span> <span class="n">keys8</span> <span class="o">=</span> <span class="n">keys8</span><span class="o">+</span><span class="s1">&#39;,&#39;</span><span class="o">+</span><span class="n">key</span>
        <span class="n">keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="n">val</span> <span class="o">=</span> <span class="n">metaDataTable</span><span class="p">[</span><span class="s1">&#39;variables&#39;</span><span class="p">][</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;label&#39;</span><span class="p">]</span>
        <span class="c1"># Column name formatting</span>
        <span class="n">val</span> <span class="o">=</span> <span class="n">key</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">val</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;Estimate!!&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;!!&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span>
        <span class="n">vals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
    <span class="n">dictionary</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">vals</span><span class="p">))</span>
  
    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="c1"># Step 2)</span>
    <span class="c1"># Get the actual Table with the data we want using </span>
    <span class="c1"># the columns names obtained from the meta data table</span>
    <span class="c1">#~~~~~~~~~~~~~~~    </span>
    
    <span class="c1"># The URL we call is contingent on if the Table we want is a Detailed or Subject table</span>
    <span class="n">url1</span> <span class="o">=</span> <span class="s1">&#39;https://api.census.gov/data/20&#39;</span><span class="o">+</span><span class="n">year</span><span class="o">+</span><span class="s1">&#39;/acs/acs5?&#39;</span>
    <span class="n">url2</span> <span class="o">=</span> <span class="s1">&#39;https://api.census.gov/data/20&#39;</span><span class="o">+</span><span class="n">year</span><span class="o">+</span><span class="s1">&#39;/acs/acs5/subject?&#39;</span>
    <span class="n">base</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">tableId</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="n">base</span> <span class="o">=</span> <span class="n">url1</span> 
    <span class="k">if</span> <span class="n">tableId</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="n">base</span> <span class="o">=</span> <span class="n">url2</span>
      
    <span class="c1"># The addKey function only works after the first set of columns has been downloaded</span>
    <span class="c1"># Download First set of Tract columns</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">base</span><span class="o">+</span><span class="n">urlencode</span><span class="p">(</span><span class="n">getParams</span><span class="p">(</span><span class="n">keys1</span><span class="p">)</span> <span class="p">)</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="c1"># Download First set of Baltimore City data table columns</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">base</span><span class="o">+</span><span class="n">urlencode</span><span class="p">(</span><span class="n">getBCityParams</span><span class="p">(</span><span class="n">keys1</span><span class="p">))</span>
    <span class="n">table2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">)</span>
    <span class="n">table2</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">table2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">table2</span> <span class="o">=</span> <span class="n">table2</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="n">table2</span><span class="p">[</span><span class="s1">&#39;tract&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;010000&#39;</span>
    
    <span class="c1"># Merge EM</span>
    <span class="c1">#table = pd.concat([table, table2], keys=[&quot;NAME&quot;,&quot;state&quot;,&quot;county&quot;,], axis=0)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">table</span><span class="p">,</span> <span class="n">table2</span><span class="p">],</span> <span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">table</span><span class="p">,</span> <span class="n">table2</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    
    <span class="c1"># Now we can repetedly use this function to add as many columns as there are keys listed from the meta data table</span>
    <span class="k">if</span> <span class="n">keys2</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="p">:</span> <span class="n">table</span> <span class="o">=</span> <span class="n">addKeys</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">keys2</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">keys3</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="p">:</span> <span class="n">table</span> <span class="o">=</span> <span class="n">addKeys</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">keys3</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">keys4</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="p">:</span> <span class="n">table</span> <span class="o">=</span> <span class="n">addKeys</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">keys4</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">keys5</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="p">:</span> <span class="n">table</span> <span class="o">=</span> <span class="n">addKeys</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">keys5</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">keys6</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="p">:</span> <span class="n">table</span> <span class="o">=</span> <span class="n">addKeys</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">keys6</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">keys7</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="p">:</span> <span class="n">table</span> <span class="o">=</span> <span class="n">addKeys</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">keys7</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">keys8</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="p">:</span> <span class="n">table</span> <span class="o">=</span> <span class="n">addKeys</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">keys8</span><span class="p">)</span>
      
    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="c1"># Step 3)</span>
    <span class="c1"># Prepare Column Names using the meta data table. The raw data has columnsNames in the first row, as well.</span>
    <span class="c1"># Replace column ID&#39;s with labels from the dictionary where applicable (should be always)</span>
    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of Columns&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">dictionary</span><span class="p">)</span> <span class="p">)</span>

    <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span> <span class="n">header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dictionary</span><span class="p">[</span><span class="n">column</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span> <span class="n">header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">column</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">header</span>

    <span class="c1"># Prettify Names. Only happens with Baltimore...</span>
    <span class="n">table</span><span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;, Baltimore city, Maryland&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">table</span><span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">][</span><span class="n">table</span><span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Baltimore city, Maryland&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Baltimore City&#39;</span> 
    
    <span class="c1"># Convert to Integers Columns from Strings where Applicable</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
    
    <span class="c1"># Set the &#39;NAME&#39; Column as the index dropping the default increment</span>
    <span class="n">table</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;NAME&quot;</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">saveAcs</span><span class="p">:</span>
      <span class="c1"># Save the raw data as &#39;TABLEID_5yYEAR.csv&#39;</span>
      <span class="n">table</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;./&#39;</span><span class="o">+</span><span class="n">state</span><span class="o">+</span><span class="n">county</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">tableId</span><span class="o">+</span><span class="s1">&#39;_5y&#39;</span><span class="o">+</span><span class="n">year</span><span class="o">+</span><span class="s1">&#39;_est_Original.csv&#39;</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_ALL</span><span class="p">)</span>
      <span class="c1"># Remove the id in the column names &amp; Save the data as &#39;TABLEID_5yYEAR_est.csv&#39;</span>
      <span class="n">saveThis</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span> <span class="n">columns</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)[:]</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span>
        <span class="s2">&quot;NAME&quot;</span><span class="p">,</span><span class="s2">&quot;state&quot;</span><span class="p">,</span><span class="s2">&quot;county&quot;</span><span class="p">,</span><span class="s2">&quot;tract&quot;</span><span class="p">]</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)[</span><span class="mi">12</span><span class="p">:]</span> <span class="p">)</span>  <span class="p">)</span>
      <span class="n">saveThis</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;./&#39;</span><span class="o">+</span><span class="n">state</span><span class="o">+</span><span class="n">county</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">tableId</span><span class="o">+</span><span class="s1">&#39;_5y&#39;</span><span class="o">+</span><span class="n">year</span><span class="o">+</span><span class="s1">&#39;_est.csv&#39;</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_ALL</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">table</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now use this function to Download the Data!</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Our download function will use Baltimore City&#39;s tract, county and state as internal paramters</span>
<span class="c1"># Change these values in the cell below using different geographic reference codes will change those parameters</span>
<span class="n">tract</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span>
<span class="n">county</span> <span class="o">=</span> <span class="s1">&#39;510&#39;</span>
<span class="n">state</span> <span class="o">=</span> <span class="s1">&#39;24&#39;</span>

<span class="c1"># Specify the download parameters the function will receieve here</span>
<span class="n">tableId</span> <span class="o">=</span> <span class="s1">&#39;B19001&#39;</span>
<span class="n">year</span> <span class="o">=</span> <span class="s1">&#39;17&#39;</span>
<span class="n">saveAcs</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">retrieve_acs_data</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">county</span><span class="p">,</span> <span class="n">tract</span><span class="p">,</span> <span class="n">tableId</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">saveAcs</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Congratulations!">Congratulations!<a class="anchor-link" href="#Congratulations!"> </a></h2><p>If you have gotten to this part, you have succesfully downloaded the ACS data.</p>
<p>The next parts have been put together to help you with basic ACS data handling tasks and play.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="CROSSWALK">CROSSWALK<a class="anchor-link" href="#CROSSWALK"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Crosswalks help translate the census tract ID's to something more human friendly </li>
<li>We also commonly use them to pass Boundary data to the datasets using the tract names as a bridge</li>
<li>Bnia uses a crosswalk that map tract id's to Community Statistical Areas (CSA's)</li>
<li>Community Statistical Areas (CSA's) were created using regional planning districts as reference </li>
<li>Regional planning districts were formed by the Baltimore Metropolitan Council (BMC) </li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Before we create the Crosswalk function, lets make sure we have the data we will need for the function.</p>
<p>Just for giggles: I'm just going to load in the file we just created. This is kind of silly because when we called the retrieveAndCleanAcsData we stored the responce into a  variable 'df' (short for dataframe). When we read in the saved file, we are going to store it into that very same df variable.</p>
<p>The 'read_csv' Function accepts a directory file path or a url.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Please refer to the 'Connect to Drive' section to see how you access your google drive account as though it were a local directory.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># The data we just downloaded should be accessibly in your Google Local File Directory</span>
<span class="c1">#data = tableId+&#39;_5y&#39;+year+&#39;_est.csv&#39;</span>
<span class="c1"># cd ../../../../../content/drive/My Drive/colabs/DATA</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">state</span><span class="o">+</span><span class="n">county</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">tableId</span><span class="o">+</span><span class="s1">&#39;_5y&#39;</span><span class="o">+</span><span class="n">year</span><span class="o">+</span><span class="s1">&#39;_est_Original.csv&#39;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span> <span class="n">data</span> <span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And now I will get a crosswalk.</p>
<p>The crossswalk used in this example is from a google spreadsheet I made publically accessible via URL.</p>
<p>I will print out the column names of this crosswalk too as it will come in handy right soon</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Publish a google spreadsheet to the web and it can be retrieved via URL here.</span>
<span class="c1"># Instructions to do this yoruself: https://support.google.com/docs/answer/183965?co=GENIE.Platform%3DDesktop&amp;hl=en</span>
<span class="n">baltimore</span> <span class="o">=</span> <span class="s1">&#39;2PACX-1vREwwa_s8Ix39OYGnnS_wA8flOoEkU7reIV4o3ZhlwYhLXhpNEvnOia_uHUDBvnFptkLLHHlaQNvsQE&#39;</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://docs.google.com/spreadsheets/d/e/&#39;</span> <span class="o">+</span> <span class="n">baltimore</span> <span class="o">+</span> <span class="s1">&#39;/pub?output=csv&#39;</span> 

<span class="c1"># Match Tract to CSA</span>
<span class="n">crosswalk</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span> <span class="n">url</span> <span class="p">)</span>
<span class="n">crosswalk</span><span class="o">.</span><span class="n">columns</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now lets create our crosswalk function!</p>
<ul>
<li>If any record from our original dataset is not matched, we will be told which (so that we may fix it).</li>
<li>The final returned dataset will have any unmatached records removed.</li>
<li>It will save the dataset if desired and may take a filename or create its own.</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@title Run This Cell: Create mergeDatasets()</span>

<span class="k">def</span> <span class="nf">mergeDatasets</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">cw</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">False</span> <span class="p">):</span> 
    
    
  <span class="c1"># Check if the columns actually exist</span>
  <span class="k">def</span> <span class="nf">checkColumns</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">cw</span><span class="p">,</span> <span class="n">left_on</span><span class="p">,</span> <span class="n">right_on</span><span class="p">,</span> <span class="n">how</span><span class="p">):</span> 
    <span class="n">dfkeyexist</span> <span class="o">=</span> <span class="p">{</span><span class="n">left_on</span><span class="p">}</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
    <span class="n">cwkeyexist</span> <span class="o">=</span> <span class="p">{</span><span class="n">right_on</span><span class="p">}</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">cw</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> 
    <span class="n">cscolexist</span> <span class="o">=</span> <span class="p">(</span> <span class="p">{</span><span class="n">how</span><span class="p">}</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">cw</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="ow">or</span> 
                  <span class="n">how</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;outer&#39;</span><span class="p">,</span> <span class="s1">&#39;inner&#39;</span><span class="p">]</span> <span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;df&#39;</span><span class="p">,</span> <span class="n">dfkeyexist</span><span class="p">,</span> <span class="s1">&#39;cw&#39;</span><span class="p">,</span> <span class="n">cwkeyexist</span><span class="p">,</span> <span class="s1">&#39;cs&#39;</span><span class="p">,</span> <span class="n">cscolexist</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="p">(</span><span class="n">dfkeyexist</span> <span class="ow">and</span> <span class="n">cwkeyexist</span> <span class="ow">and</span> <span class="n">cscolexist</span><span class="p">)</span>

  <span class="c1"># Ensure data types are the same</span>
  <span class="k">def</span> <span class="nf">coerceDtypes</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">cw</span><span class="p">,</span> <span class="n">left_on</span><span class="p">,</span> <span class="n">right_on</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">foreignDtype</span> <span class="o">=</span> <span class="n">cw</span><span class="p">[</span><span class="n">right_on</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span>
    <span class="n">localDtype</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">left_on</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span>  
    
    <span class="c1"># Coerce one way or the other if possible</span>
    <span class="k">if</span> <span class="n">localDtype</span> <span class="o">==</span> <span class="s1">&#39;int64&#39;</span> <span class="ow">and</span> <span class="n">foreignDtype</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span><span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Converting Foreign Key from Object to Int&#39;</span> <span class="p">)</span>
      <span class="n">cw</span><span class="p">[</span><span class="n">right_on</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">cw</span><span class="p">[</span><span class="n">right_on</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
      <span class="n">foreignDtype</span> <span class="o">=</span> <span class="n">cw</span><span class="p">[</span><span class="n">right_on</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span>
      
    <span class="k">if</span> <span class="n">localDtype</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span> <span class="ow">and</span> <span class="n">foreignDtype</span> <span class="o">==</span> <span class="s1">&#39;int64&#39;</span><span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Converting Foreign Key from Object to Int&#39;</span> <span class="p">)</span>
      <span class="n">df</span><span class="p">[</span><span class="n">left_on</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">left_on</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
      <span class="n">localDtype</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">left_on</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span>
      
    <span class="c1"># Return the data and the coerce status</span>
    <span class="k">if</span> <span class="n">localDtype</span> <span class="o">==</span> <span class="n">foreignDtype</span><span class="p">:</span> <span class="n">status</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="n">df</span><span class="p">,</span> <span class="n">cw</span><span class="p">,</span> <span class="n">status</span>


  <span class="c1"># Decide to perform a merge or commit a pull</span>
  <span class="k">def</span> <span class="nf">mergeOrPull</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">cw</span><span class="p">,</span> <span class="n">left_on</span><span class="p">,</span> <span class="n">right_on</span><span class="p">,</span> <span class="n">how</span><span class="p">):</span>  
    
    <span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">cw</span><span class="p">,</span> <span class="n">left_on</span><span class="p">,</span> <span class="n">right_on</span><span class="p">,</span> <span class="n">how</span><span class="p">):</span>
      <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Merging&#39;</span><span class="p">,</span> <span class="n">left_on</span><span class="p">,</span> <span class="n">right_on</span><span class="p">,</span> <span class="n">how</span><span class="p">);</span> 
      <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">cw</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="n">left_on</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="n">right_on</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="n">how</span><span class="p">)</span>
      <span class="c1"># df.drop(left_on, axis=1)</span>
      <span class="n">df</span><span class="p">[</span><span class="n">right_on</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">right_on</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s1">&#39;empty&#39;</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">df</span>

    <span class="k">def</span> <span class="nf">pull</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">cw</span><span class="p">,</span> <span class="n">left_on</span><span class="p">,</span> <span class="n">right_on</span><span class="p">,</span> <span class="n">how</span><span class="p">):</span>
      <span class="n">crswlk</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">cw</span><span class="p">[</span><span class="n">right_on</span><span class="p">],</span> <span class="n">crosswalk</span><span class="p">[</span><span class="n">how</span><span class="p">]</span>  <span class="p">)</span> <span class="p">)</span>
      <span class="n">dtype</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">left_on</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span>
      <span class="c1"># print(&#39;Pulling&#39;); </span>
      <span class="c1"># print(&#39;df.columns&#39;, left_on, df[left_on].dtype)</span>
      <span class="c1"># print(&#39;cw.columns&#39;, right_on, cw[right_on].dtype)</span>
      <span class="c1"># print(&#39;left_on&#39;, left_on, &#39;right_on&#39;, right_on, &#39;how&#39;, how)</span>
      <span class="k">if</span> <span class="n">dtype</span> <span class="o">==</span><span class="s1">&#39;object&#39;</span><span class="p">:</span>  <span class="n">df</span><span class="p">[</span><span class="n">how</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">crswlk</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">left_on</span><span class="p">]),</span> <span class="s2">&quot;empty&quot;</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">dtype</span> <span class="o">==</span> <span class="s1">&#39;int64&#39;</span><span class="p">:</span> 
        <span class="n">df</span><span class="p">[</span><span class="n">how</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">crswlk</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">left_on</span><span class="p">]),</span> <span class="s2">&quot;empty&quot;</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">df</span>
    
      <span class="c1">#crswlk = dict(zip(crosswalk[foreign_tract_name], crosswalk[new_column_name]  ) )</span>
      <span class="c1">#if foreignDtype == &#39;object&#39; and foreignDtype == &#39;object&#39;:</span>
      <span class="c1">#  temp[new_column_name] = temp.apply(lambda row: crswlk.get(str(row[local_tract_name]), &quot;empty&quot;), axis=1)</span>
      <span class="c1">#elif foreignDtype == &#39;int64&#39; and foreignDtype == &#39;int64&#39;:</span>
      <span class="c1">#  temp[new_column_name] = temp.apply(lambda row: crswlk.get(int(row[local_tract_name]), &quot;empty&quot;), axis=1)</span>
      <span class="c1">#else: print(&#39;THERE BE PROBLEM&#39;)</span>
    
    <span class="n">mergeType</span> <span class="o">=</span> <span class="n">how</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;outer&#39;</span><span class="p">,</span> <span class="s1">&#39;inner&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">mergeType</span><span class="p">:</span> <span class="k">return</span> <span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">cw</span><span class="p">,</span> <span class="n">left_on</span><span class="p">,</span> <span class="n">right_on</span><span class="p">,</span> <span class="n">how</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">pull</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">cw</span><span class="p">,</span> <span class="n">left_on</span><span class="p">,</span> <span class="n">right_on</span><span class="p">,</span> <span class="n">how</span><span class="p">)</span>
    
  
    
  <span class="c1"># Filter between matched records and not.</span>
  <span class="k">def</span> <span class="nf">filterEmpties</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">cw</span><span class="p">,</span> <span class="n">left_on</span><span class="p">,</span> <span class="n">right_on</span><span class="p">,</span> <span class="n">how</span><span class="p">):</span>
    
    <span class="k">if</span> <span class="n">how</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;outer&#39;</span><span class="p">,</span> <span class="s1">&#39;inner&#39;</span><span class="p">]:</span> <span class="n">how</span> <span class="o">=</span> <span class="n">right_on</span>
    <span class="n">nomatch</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">how</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;empty&#39;</span><span class="p">]</span>
    <span class="n">nomatch</span> <span class="o">=</span> <span class="n">nomatch</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">left_on</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">nomatch</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
      <span class="c1"># Do the same thing with our foreign tracts</span>
      <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Local Column Values Not Matched &#39;</span><span class="p">)</span>
      <span class="nb">print</span><span class="p">(</span><span class="n">nomatch</span><span class="p">[</span><span class="n">left_on</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span> <span class="p">)</span>
      <span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">nomatch</span><span class="p">[</span><span class="n">left_on</span><span class="p">]))</span>
      <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
      <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Crosswalk Unique Column Values&#39;</span><span class="p">)</span>
      <span class="nb">print</span><span class="p">(</span><span class="n">cw</span><span class="p">[</span><span class="n">right_on</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span> <span class="p">)</span>
    
    <span class="c1"># Create a new column with the tracts value mapped to its corresponding value from the crossswalk</span>
    <span class="n">df</span><span class="p">[</span><span class="n">how</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;empty&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="n">how</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1"># cw = cw.sort_values(by=how, ascending=True)</span>
    <span class="k">return</span> <span class="n">df</span>

  <span class="c1"># Save the data (again) as Cleaned for me to use in the next scripts</span>
  <span class="k">def</span> <span class="nf">saveCrosswalk</span><span class="p">(</span><span class="n">save</span><span class="p">,</span> <span class="n">fileName</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">save</span><span class="p">:</span> 
      <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;SavingCrosswalk&#39;</span><span class="p">);</span> 
      <span class="k">if</span> <span class="n">fileName</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">fileName</span><span class="p">);</span> <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_ALL</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span> <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;./crosswalk-matched-&#39;</span><span class="o">+</span><span class="n">left_on</span><span class="o">+</span><span class="s1">&#39;-to-&#39;</span><span class="o">+</span><span class="n">right_on</span><span class="o">+</span><span class="s1">&#39;-pulling-&#39;</span><span class="o">+</span><span class="n">how</span><span class="o">+</span><span class="s1">&#39;.csv&#39;</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_ALL</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">getMergeParams</span><span class="p">():</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Please enter the location of your left dataset: &quot;</span> <span class="p">)</span> <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;Left Columns &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>

    <span class="n">crosswalk</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Please enter the location of your right dataset: &quot;</span> <span class="p">)</span> <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;Right Columns &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">crosswalk</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="n">left_on</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Left on: &quot;</span> <span class="p">)</span>
    <span class="n">right_on</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Right on: &quot;</span> <span class="p">)</span>
    <span class="n">how</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;How: (left, right, outer, inner, columnName) &quot;</span> <span class="p">)</span>

    <span class="c1"># Save the data</span>
    <span class="n">saveFile</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Save File (&#39;Y&#39; or &#39;N&#39;): &quot;</span><span class="p">)</span>
    <span class="n">outFile</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">saveFile</span> <span class="o">==</span> <span class="s1">&#39;Y&#39;</span> <span class="ow">or</span> <span class="n">saveFile</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
      <span class="n">outFile</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Saved Filename (Do not include the file extension ): &quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">df</span><span class="p">,</span> <span class="n">crosswalk</span><span class="p">,</span> <span class="n">left_on</span><span class="p">,</span> <span class="n">right_on</span><span class="p">,</span> <span class="n">how</span><span class="p">,</span> <span class="n">saveFile</span><span class="p">,</span> <span class="n">outFile</span>
    
    
  <span class="c1"># This function uses all the other functions</span>
  <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">cw</span><span class="p">,</span> <span class="n">left_on</span><span class="p">,</span> <span class="n">right_on</span><span class="p">,</span> <span class="n">how</span><span class="p">,</span> <span class="n">save</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    
    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cw</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">))</span> 
        <span class="ow">or</span> <span class="ow">not</span> <span class="n">left_on</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">right_on</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">how</span><span class="p">):</span> <span class="k">return</span> <span class="n">crosswalkIt</span><span class="p">(</span> <span class="o">*</span><span class="n">getMergeParams</span><span class="p">()</span> <span class="p">);</span>
    
    <span class="c1"># Quit if the Columns dont exist</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">checkColumns</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">cw</span><span class="p">,</span> <span class="n">left_on</span><span class="p">,</span> <span class="n">right_on</span><span class="p">,</span> <span class="n">how</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;A specified column does not exist&#39;</span><span class="p">);</span> <span class="k">return</span> <span class="kc">False</span><span class="p">;</span>
    
    <span class="c1"># Quit if the foreign key data types wont align nicely</span>
    <span class="n">df</span><span class="p">,</span> <span class="n">cw</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">coerceDtypes</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">cw</span><span class="p">,</span> <span class="n">left_on</span><span class="p">,</span> <span class="n">right_on</span><span class="p">);</span>
    <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Foreign keys data types do not match&#39;</span><span class="p">);</span> <span class="k">return</span> <span class="kc">False</span><span class="p">;</span>
      
    <span class="c1"># Perform the merge</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">mergeOrPull</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">cw</span><span class="p">,</span> <span class="n">left_on</span><span class="p">,</span> <span class="n">right_on</span><span class="p">,</span> <span class="n">how</span><span class="p">)</span>    
    
    <span class="c1"># Filter out columns not matched</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">filterEmpties</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">cw</span><span class="p">,</span> <span class="n">left_on</span><span class="p">,</span> <span class="n">right_on</span><span class="p">,</span> <span class="n">how</span><span class="p">)</span>
    
    <span class="c1"># Save this final result</span>
    <span class="n">saveCrosswalk</span><span class="p">(</span><span class="n">save</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
                      
    <span class="k">return</span> <span class="n">df</span>
  
  <span class="k">return</span> <span class="n">main</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">cw</span><span class="p">,</span> <span class="n">left_on</span><span class="p">,</span> <span class="n">right_on</span><span class="p">,</span> <span class="n">how</span><span class="p">,</span> <span class="n">save</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
<span class="c1"># https://docs.google.com/spreadsheets/d/e/2PACX-1vTPKW6YOHPFvkw3FM3m5y67-Aa5ZlrM0Ee1Fb57wlGuldr99sEvVWnkej30FXhSb3j8o9gr8izq2ZRP/pub?output=csv</span>
<span class="c1"># https://docs.google.com/spreadsheets/d/e/2PACX-1vREwwa_s8Ix39OYGnnS_wA8flOoEkU7reIV4o3ZhlwYhLXhpNEvnOia_uHUDBvnFptkLLHHlaQNvsQE/pub?output=csv</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Lets Crosswalk! We have an original dataset, the crosswalk dataset,</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">local_match_col</span> <span class="o">=</span> <span class="s1">&#39;tract&#39;</span>
<span class="n">foreign_match_col</span> <span class="o">=</span> <span class="s1">&#39;TRACT2010&#39;</span>
<span class="n">foreign_wanted_col</span> <span class="o">=</span> <span class="s1">&#39;CSA2010&#39;</span>
<span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
<span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;ExampleCrosswalkTest.csv&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">crosswalkExample</span> <span class="o">=</span> <span class="n">mergeDatasets</span><span class="p">(</span> <span class="n">df</span><span class="p">,</span> <span class="n">crosswalk</span><span class="p">,</span> <span class="n">local_match_col</span><span class="p">,</span> <span class="n">foreign_match_col</span><span class="p">,</span> <span class="n">foreign_wanted_col</span><span class="p">,</span> <span class="n">save</span><span class="p">,</span> <span class="n">fileName</span> <span class="p">)</span>
<span class="n">crosswalkExample</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Geographic data may be crosswalked as well. More information in the 'Maps' section.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Creating-BNIA-Indictors">Creating BNIA Indictors<a class="anchor-link" href="#Creating-BNIA-Indictors"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Awesome!</p>
<p>By this point you should be able to download a dataset, and crosswalk new columns onto it by matching on 'tract'</p>
<p>What we are going to do now is perform calculations using these newly created datasets.</p>
<p>Run the next few cells to create our calculatory functions</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@title Run This Cell: Misc Function Declarations</span>
<span class="c1"># These functions right here are used in the calculations below.</span>
<span class="c1"># Finds a column matchings a substring</span>
<span class="k">def</span> <span class="nf">getColName</span>  <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">col</span><span class="p">):</span> <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">pat</span> <span class="o">=</span> <span class="n">col</span><span class="p">)][</span><span class="mi">0</span><span class="p">]</span> 
<span class="k">def</span> <span class="nf">getColByName</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">col</span><span class="p">):</span> <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="n">getColName</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">col</span><span class="p">)]</span>

<span class="c1"># Pulls a column from one dataset into a new dataset. </span>
<span class="c1"># This is not a crosswalk. calls getColByName() </span>
<span class="k">def</span> <span class="nf">addKey</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">fi</span><span class="p">,</span> <span class="n">col</span><span class="p">):</span>
    <span class="n">key</span> <span class="o">=</span> <span class="n">getColName</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
    <span class="n">val</span> <span class="o">=</span> <span class="n">getColByName</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
    <span class="n">fi</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
    <span class="k">return</span> <span class="n">fi</span>
<span class="c1"># Return 0 if two specified columns are equal.</span>
<span class="k">def</span> <span class="nf">nullIfEqual</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">):</span> 
    <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> 
        <span class="n">x</span><span class="p">[</span><span class="n">getColName</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">c1</span><span class="p">)]</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="n">getColName</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">c2</span><span class="p">)]</span> <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="n">getColName</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">c1</span><span class="p">)]</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="n">getColName</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">c2</span><span class="p">)]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># I&#39;m thinking this doesnt need to be a function..</span>
<span class="k">def</span> <span class="nf">sumInts</span><span class="p">(</span><span class="n">df</span><span class="p">):</span> <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">numeric_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># @title Run This Cell : Create MHHI</span>

<span class="c1">#File: mhhi.py</span>
<span class="c1">#Author: Charles Karpati</span>
<span class="c1">#Date: 1/24/19</span>
<span class="c1">#Section: Bnia</span>
<span class="c1">#Email: karpati1@umbc.edu</span>
<span class="c1">#Description: </span>
<span class="c1"># Uses ACS Table B19001 - HOUSEHOLD INCOME IN THE PAST 12 MONTHS (IN 2016 INFLATION-ADJUSTED DOLLARS)</span>
<span class="c1"># Universe: Households</span>
<span class="c1"># Table Creates: hh25 hh40 hh60 hh75 hhm75, mhhi</span>
<span class="c1">#purpose: Produce Sustainability - Percent of Population that Walks to Work Indicator</span>
<span class="c1">#input:</span>
<span class="c1">#output:</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">glob</span>

<span class="k">def</span> <span class="nf">mhhi</span><span class="p">(</span> <span class="n">df</span><span class="p">,</span> <span class="n">columnsToInclude</span> <span class="o">=</span> <span class="p">[]</span> <span class="p">):</span>
  <span class="c1">#~~~~~~~~~~~~~~~</span>
  <span class="c1"># Step 2)</span>
  <span class="c1"># Prepare the columns</span>
  <span class="c1">#~~~~~~~~~~~~~~~ </span>
  <span class="n">info</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
      <span class="p">[</span>
          <span class="p">[</span><span class="s1">&#39;B19001_002E&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10000</span><span class="p">],</span>
          <span class="p">[</span><span class="s1">&#39;B19001_003E&#39;</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="mi">4999</span> <span class="p">],</span>
          <span class="p">[</span><span class="s1">&#39;B19001_004E&#39;</span><span class="p">,</span> <span class="mi">15000</span><span class="p">,</span> <span class="mi">4999</span> <span class="p">],</span>
          <span class="p">[</span><span class="s1">&#39;B19001_005E&#39;</span><span class="p">,</span> <span class="mi">20000</span><span class="p">,</span> <span class="mi">4999</span> <span class="p">],</span>
          <span class="p">[</span><span class="s1">&#39;B19001_006E&#39;</span><span class="p">,</span> <span class="mi">25000</span><span class="p">,</span> <span class="mi">4999</span> <span class="p">],</span>
          <span class="p">[</span><span class="s1">&#39;B19001_007E&#39;</span><span class="p">,</span> <span class="mi">30000</span><span class="p">,</span> <span class="mi">4999</span><span class="p">],</span>
          <span class="p">[</span><span class="s1">&#39;B19001_008E&#39;</span><span class="p">,</span> <span class="mi">35000</span><span class="p">,</span> <span class="mi">4999</span> <span class="p">],</span>
          <span class="p">[</span><span class="s1">&#39;B19001_009E&#39;</span><span class="p">,</span> <span class="mi">40000</span><span class="p">,</span> <span class="mi">4999</span> <span class="p">],</span>
          <span class="p">[</span><span class="s1">&#39;B19001_010E&#39;</span><span class="p">,</span> <span class="mi">45000</span><span class="p">,</span> <span class="mi">4999</span> <span class="p">],</span>
          <span class="p">[</span><span class="s1">&#39;B19001_011E&#39;</span><span class="p">,</span> <span class="mi">50000</span><span class="p">,</span> <span class="mi">9999</span> <span class="p">],</span>
          <span class="p">[</span><span class="s1">&#39;B19001_012E&#39;</span><span class="p">,</span> <span class="mi">60000</span><span class="p">,</span> <span class="mi">14999</span><span class="p">],</span>
          <span class="p">[</span><span class="s1">&#39;B19001_013E&#39;</span><span class="p">,</span> <span class="mi">75000</span><span class="p">,</span> <span class="mi">24999</span> <span class="p">],</span>
          <span class="p">[</span><span class="s1">&#39;B19001_014E&#39;</span><span class="p">,</span> <span class="mi">100000</span><span class="p">,</span> <span class="mi">24999</span> <span class="p">],</span>
          <span class="p">[</span><span class="s1">&#39;B19001_015E&#39;</span><span class="p">,</span> <span class="mi">125000</span><span class="p">,</span> <span class="mi">24999</span> <span class="p">],</span>
          <span class="p">[</span><span class="s1">&#39;B19001_016E&#39;</span><span class="p">,</span> <span class="mi">150000</span><span class="p">,</span> <span class="mi">49000</span> <span class="p">],</span>
          <span class="p">[</span><span class="s1">&#39;B19001_017E&#39;</span><span class="p">,</span> <span class="mi">200000</span><span class="p">,</span> <span class="mi">1000000000000000000000000</span> <span class="p">],</span>

      <span class="p">],</span> 
      <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;variable&#39;</span><span class="p">,</span> <span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="s1">&#39;range&#39;</span><span class="p">]</span>
  <span class="p">)</span>

  <span class="c1"># Final Dataframe  </span>
  <span class="n">data_table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
  <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
      <span class="n">data_table</span> <span class="o">=</span> <span class="n">addKey</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">data_table</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;variable&#39;</span><span class="p">])</span>

  <span class="c1"># Accumulate totals accross the columns.</span>
  <span class="c1"># Midpoint: Divide column index 16 (the last column) of the cumulative totals</span>
  <span class="n">temp_table</span> <span class="o">=</span> <span class="n">data_table</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
  <span class="n">temp_table</span><span class="p">[</span><span class="s1">&#39;midpoint&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">temp_table</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span> <span class="p">:</span> <span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="p">:]</span> <span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># V3</span>
  <span class="n">temp_table</span><span class="p">[</span><span class="s1">&#39;midpoint_index&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
  <span class="n">temp_table</span><span class="p">[</span><span class="s1">&#39;midpoint_index_value&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># Z3</span>
  <span class="n">temp_table</span><span class="p">[</span><span class="s1">&#39;midpoint_index_lower&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># W3 </span>
  <span class="n">temp_table</span><span class="p">[</span><span class="s1">&#39;midpoint_index_range&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># X3</span>
  <span class="n">temp_table</span><span class="p">[</span><span class="s1">&#39;midpoint_index_minus_one_cumulative_sum&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1">#Y3</span>
  <span class="c1"># step 3 - csa_agg3: get the midpoint index by &quot;when midpoint &gt; agg[1] and midpoint &lt;= agg[2] then 2&quot;</span>

  <span class="c1"># Get CSA Midpoint Index using the breakpoints in our info table.</span>
  <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">temp_table</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
      <span class="c1"># Get the index of the first column where our midpoint is greater than the columns value.</span>
      <span class="n">midpoint</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;midpoint&#39;</span><span class="p">]</span>
      <span class="n">midpoint_index</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="c1"># For each column (except the 6 columns we just created)</span>

      <span class="c1"># The tracts midpoint was &lt; than the first tracts value at column &#39;B19001_002E_Total_Less_than_$10,000&#39;</span>
      <span class="k">if</span><span class="p">(</span> <span class="n">midpoint</span> <span class="o">&lt;</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">or</span> <span class="n">row</span><span class="p">[</span><span class="o">-</span><span class="mi">6</span><span class="p">]</span> <span class="o">==</span> <span class="kc">False</span> <span class="p">):</span>
        <span class="n">temp_table</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span> <span class="n">index</span><span class="p">,</span> <span class="s1">&#39;midpoint_index&#39;</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">row</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">6</span><span class="p">]:</span>
            <span class="c1"># set midpoint index to the column with the highest value possible that is under midpoint          </span>
            <span class="k">if</span><span class="p">(</span> <span class="n">midpoint</span> <span class="o">&gt;=</span> <span class="nb">int</span><span class="p">(</span><span class="n">column</span><span class="p">)</span> <span class="p">):</span>
                <span class="k">if</span> <span class="n">midpoint</span><span class="o">==</span><span class="kc">False</span><span class="p">:</span> <span class="nb">print</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">column</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">midpoint</span><span class="p">))</span>
                <span class="n">temp_table</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span> <span class="n">index</span><span class="p">,</span> <span class="s1">&#39;midpoint_index&#39;</span> <span class="p">]</span> <span class="o">=</span> <span class="n">midpoint_index</span> <span class="o">+</span><span class="mi">1</span>
            <span class="n">midpoint_index</span> <span class="o">+=</span> <span class="mi">1</span>

  <span class="c1"># temp_table = temp_table.drop(&#39;Unassigned--Jail&#39;)</span>
  <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">temp_table</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span> 
    <span class="n">temp_table</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span> <span class="n">index</span><span class="p">,</span> <span class="s1">&#39;midpoint_index_value&#39;</span> <span class="p">]</span> <span class="o">=</span> <span class="n">data_table</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span> <span class="n">index</span><span class="p">,</span> <span class="n">data_table</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;midpoint_index&#39;</span><span class="p">]]</span> <span class="p">]</span>
    <span class="n">temp_table</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span> <span class="n">index</span><span class="p">,</span> <span class="s1">&#39;midpoint_index_lower&#39;</span> <span class="p">]</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;midpoint_index&#39;</span><span class="p">]</span> <span class="p">][</span><span class="s1">&#39;lower&#39;</span><span class="p">]</span>     
    <span class="n">temp_table</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span> <span class="n">index</span><span class="p">,</span> <span class="s1">&#39;midpoint_index_range&#39;</span> <span class="p">]</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;midpoint_index&#39;</span><span class="p">]</span> <span class="p">][</span><span class="s1">&#39;range&#39;</span><span class="p">]</span>
    <span class="n">temp_table</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span> <span class="n">index</span><span class="p">,</span> <span class="s1">&#39;midpoint_index_minus_one_cumulative_sum&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;midpoint_index&#39;</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span> <span class="p">]</span>

  <span class="c1"># This is our denominator, which cant be negative.</span>
  <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">temp_table</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;midpoint_index_value&#39;</span><span class="p">]</span><span class="o">==</span><span class="kc">False</span><span class="p">:</span> 
      <span class="n">temp_table</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;midpoint_index_value&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
      
  <span class="c1">#~~~~~~~~~~~~~~~</span>
  <span class="c1"># Step 3)</span>
  <span class="c1"># Run the Calculation </span>
  <span class="c1"># Calculation = (midpoint_lower::numeric + (midpoint_range::numeric * ( (midpoint - midpoint_upto_agg) / nullif(midpoint_total,0)</span>
  <span class="c1"># Calculation = W3+X3*((V3-Y3)/Z3)</span>

  <span class="c1"># v3 -&gt; 1 - midpoint of households  == sum / 2</span>
  <span class="c1"># w3 -&gt; 2 - lower limit of the income range containing the midpoint of the housing total == row[lower]</span>
  <span class="c1"># x3 -&gt; width of the interval containing the medium == row[range]</span>
  <span class="c1"># z3 -&gt; number of hhs within the interval containing the median == row[total] </span>
  <span class="c1"># y3 -&gt; 4 - cumulative frequency up to, but no==NOT including the median interval</span>
  <span class="c1">#~~~~~~~~~~~~~~~</span>

  <span class="k">def</span> <span class="nf">finalCalc</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;midpoint_index_lower&#39;</span><span class="p">]</span><span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;midpoint_index_range&#39;</span><span class="p">]</span><span class="o">*</span><span class="p">(</span>
      <span class="p">(</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;midpoint&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;midpoint_index_minus_one_cumulative_sum&#39;</span><span class="p">])</span><span class="o">/</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;midpoint_index_value&#39;</span><span class="p">]</span> <span class="p">)</span> 
    <span class="p">)</span>

  <span class="n">temp_table</span><span class="p">[</span><span class="s1">&#39;final&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp_table</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">finalCalc</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
  
  
  <span class="n">columnsToInclude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;tract&#39;</span><span class="p">)</span>
  <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;INCLUDING COLUMN(s):&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">columnsToInclude</span><span class="p">))</span>
  <span class="n">temp_table</span><span class="p">[</span><span class="n">columnsToInclude</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">columnsToInclude</span><span class="p">]</span>
  <span class="c1">#~~~~~~~~~~~~~~~</span>
  <span class="c1"># Step 4)</span>
  <span class="c1"># Add Special Baltimore City Data</span>
  <span class="c1">#~~~~~~~~~~~~~~~  </span>
  <span class="c1"># url = &#39;https://api.census.gov/data/20&#39;+str(year)+&#39;/acs/acs5/subject?get=NAME,S1901_C01_012E&amp;for=county%3A510&amp;in=state%3A24&amp;key=829bf6f2e037372acbba32ba5731647c5127fdb0&#39;</span>
  <span class="c1"># table = pd.read_json(url, orient=&#39;records&#39;)</span>
  <span class="c1"># temp_table[&#39;final&#39;][&#39;Baltimore City&#39;] = float(table.loc[1, table.columns[1]])</span>
    
  <span class="k">return</span> <span class="n">temp_table</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@title Run This Cell: Create trav45</span>

<span class="c1">#File: trav45.py</span>
<span class="c1">#Author: Charles Karpati</span>
<span class="c1">#Date: 1/17/19</span>
<span class="c1">#Section: Bnia</span>
<span class="c1">#Email: karpati1@umbc.edu</span>
<span class="c1">#Description: </span>
<span class="c1"># Uses ACS Table B08303 - TRAVEL TIME TO WORK,</span>
<span class="c1"># (Universe: Workers 16 years and over who did not work at home) </span>
<span class="c1"># Table Creates: trav14, trav29, trav44, trav45</span>
<span class="c1">#purpose: Produce Sustainability - Percent of Employed Population with Travel Time to Work of 45 Minutes and Over Indicator</span>
<span class="c1">#input: </span>
<span class="c1">#output: </span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="k">def</span> <span class="nf">trav45</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columnsToInclude</span> <span class="o">=</span> <span class="p">[]</span> <span class="p">):</span>
    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="c1"># Step 2)</span>
    <span class="c1"># Prepare the columns</span>
    <span class="c1">#~~~~~~~~~~~~~~~ </span>

    <span class="c1"># Final Dataframe  </span>
    <span class="n">fi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B08303_011E&#39;</span><span class="p">,</span><span class="s1">&#39;B08303_012E&#39;</span><span class="p">,</span><span class="s1">&#39;B08303_013E&#39;</span><span class="p">,</span><span class="s1">&#39;B08303_001E&#39;</span><span class="p">,</span> <span class="s1">&#39;tract&#39;</span><span class="p">]</span> 
    <span class="n">columns</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">columnsToInclude</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
        <span class="n">fi</span> <span class="o">=</span> <span class="n">addKey</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">fi</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>

    <span class="c1"># Numerators </span>
    <span class="n">numerators</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B08303_011E&#39;</span><span class="p">,</span><span class="s1">&#39;B08303_012E&#39;</span><span class="p">,</span><span class="s1">&#39;B08303_013E&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
        <span class="n">numerators</span> <span class="o">=</span> <span class="n">addKey</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">numerators</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
    
    <span class="c1"># Denominators</span>
    <span class="n">denominators</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B08303_001E&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
        <span class="n">denominators</span> <span class="o">=</span> <span class="n">addKey</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">denominators</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
    <span class="c1"># construct the denominator, returns 0 iff the other two rows are equal.</span>

    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="c1"># Step 3)</span>
    <span class="c1"># Run the Calculation </span>
<span class="c1"># ( (value[1] + value[2] + value[3] ) / nullif(value[4],0) )*100</span>
    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="n">fi</span><span class="p">[</span><span class="s1">&#39;numerator&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numerators</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">fi</span><span class="p">[</span><span class="s1">&#39;denominator&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">denominators</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">fi</span> <span class="o">=</span> <span class="n">fi</span><span class="p">[</span><span class="n">fi</span><span class="p">[</span><span class="s1">&#39;denominator&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">]</span> <span class="c1"># Delete Rows where the &#39;denominator&#39; column is 0</span>
    <span class="n">fi</span><span class="p">[</span><span class="s1">&#39;final&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">fi</span><span class="p">[</span><span class="s1">&#39;numerator&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">fi</span><span class="p">[</span><span class="s1">&#39;denominator&#39;</span><span class="p">]</span> <span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
    
    <span class="k">return</span> <span class="n">fi</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@title Run This Cell: Create trav44</span>

<span class="c1">#File: trav44.py</span>
<span class="c1">#Author: Charles Karpati</span>
<span class="c1">#Date: 1/17/19</span>
<span class="c1">#Section: Bnia</span>
<span class="c1">#Email: karpati1@umbc.edu</span>
<span class="c1">#Description: </span>
<span class="c1"># Uses ACS Table B08303 - TRAVEL TIME TO WORK,</span>
<span class="c1"># (Universe: Workers 16 years and over who did not work at home)</span>
<span class="c1"># Table Creates: trav14, trav29, trav44, trav45</span>
<span class="c1">#purpose: Produce Sustainability - Percent of Employed Population with Travel Time to Work of 30-44 Minutes Indicator</span>
<span class="c1">#input: </span>
<span class="c1">#output: </span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="k">def</span> <span class="nf">trav44</span><span class="p">(</span> <span class="n">df</span><span class="p">,</span> <span class="n">columnsToInclude</span> <span class="o">=</span> <span class="p">[]</span> <span class="p">):</span>
    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="c1"># Step 2)</span>
    <span class="c1"># Prepare the columns</span>
    <span class="c1">#~~~~~~~~~~~~~~~ </span>

    <span class="c1"># Final Dataframe  </span>
    <span class="n">fi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B08303_008E&#39;</span><span class="p">,</span><span class="s1">&#39;B08303_009E&#39;</span><span class="p">,</span><span class="s1">&#39;B08303_010E&#39;</span><span class="p">,</span><span class="s1">&#39;B08303_001E&#39;</span><span class="p">,</span> <span class="s1">&#39;tract&#39;</span><span class="p">]</span> 
    <span class="n">columns</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">columnsToInclude</span><span class="p">)</span> 
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
        <span class="n">fi</span> <span class="o">=</span> <span class="n">addKey</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">fi</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>

    <span class="c1"># Numerators </span>
    <span class="n">numerators</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B08303_008E&#39;</span><span class="p">,</span><span class="s1">&#39;B08303_009E&#39;</span><span class="p">,</span><span class="s1">&#39;B08303_010E&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
        <span class="n">numerators</span> <span class="o">=</span> <span class="n">addKey</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">numerators</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
    
    <span class="c1"># Denominators</span>
    <span class="n">denominators</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B08303_001E&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
        <span class="n">denominators</span> <span class="o">=</span> <span class="n">addKey</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">denominators</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
    <span class="c1"># construct the denominator, returns 0 iff the other two rows are equal.</span>

    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="c1"># Step 3)</span>
    <span class="c1"># Run the Calculation </span>
    <span class="c1"># ( (value[1] + value[2] + value[3] ) / nullif(value[4],0) )*100</span>
    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="n">fi</span><span class="p">[</span><span class="s1">&#39;numerator&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numerators</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">fi</span><span class="p">[</span><span class="s1">&#39;denominator&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">denominators</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">fi</span> <span class="o">=</span> <span class="n">fi</span><span class="p">[</span><span class="n">fi</span><span class="p">[</span><span class="s1">&#39;denominator&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">]</span> <span class="c1"># Delete Rows where the &#39;denominator&#39; column is 0</span>
    <span class="n">fi</span><span class="p">[</span><span class="s1">&#39;final&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">fi</span><span class="p">[</span><span class="s1">&#39;numerator&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">fi</span><span class="p">[</span><span class="s1">&#39;denominator&#39;</span><span class="p">]</span> <span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
    
    <span class="k">return</span> <span class="n">fi</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@title Run This Cell: Create affordr</span>

<span class="c1">#File: affordr.py</span>
<span class="c1">#Author: Charles Karpati</span>
<span class="c1">#Date: 1/17/19</span>
<span class="c1">#Section: Bnia</span>
<span class="c1">#Email: karpati1@umbc.edu</span>
<span class="c1">#Description: </span>
<span class="c1"># Uses ACS Table B25070 - GROSS RENT AS A PERCENTAGE OF HOUSEHOLD INCOME IN THE PAST 12 MONTHS </span>
<span class="c1"># Universe: Renter-occupied housing units</span>
<span class="c1">#purpose: Produce Housing and Community Development - Affordability Index - Rent Indicator</span>
<span class="c1">#input: </span>
<span class="c1">#output: </span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="k">def</span> <span class="nf">affordr</span><span class="p">(</span> <span class="n">df</span><span class="p">,</span> <span class="n">columnsToInclude</span> <span class="p">):</span>    
    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="c1"># Step 2)</span>
    <span class="c1"># Prepare the columns</span>
    <span class="c1">#~~~~~~~~~~~~~~~ </span>

    <span class="c1"># Final Dataframe  </span>
    <span class="n">fi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B25070_007E&#39;</span><span class="p">,</span><span class="s1">&#39;B25070_008E&#39;</span><span class="p">,</span><span class="s1">&#39;B25070_009E&#39;</span><span class="p">,</span><span class="s1">&#39;B25070_010E&#39;</span><span class="p">,</span><span class="s1">&#39;B25070_001E&#39;</span><span class="p">,</span> <span class="s1">&#39;tract&#39;</span><span class="p">]</span> 
    <span class="n">columns</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">columnsToInclude</span><span class="p">)</span> 
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
        <span class="n">fi</span> <span class="o">=</span> <span class="n">addKey</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">fi</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>

    <span class="c1"># Numerators </span>
    <span class="n">numerators</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B25070_007E&#39;</span><span class="p">,</span><span class="s1">&#39;B25070_008E&#39;</span><span class="p">,</span><span class="s1">&#39;B25070_009E&#39;</span><span class="p">,</span><span class="s1">&#39;B25070_010E&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
        <span class="n">numerators</span> <span class="o">=</span> <span class="n">addKey</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">numerators</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
    
    <span class="c1"># Denominators</span>
    <span class="n">denominators</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B25070_001E&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
        <span class="n">denominators</span> <span class="o">=</span> <span class="n">addKey</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">denominators</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
    <span class="c1"># construct the denominator, returns 0 iff the other two rows are equal.</span>

    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="c1"># Step 3)</span>
    <span class="c1"># Run the Calculation </span>
    <span class="c1"># ( (value[1]+value[2]+value[3]+value[4]) / nullif(value[5],0) )*100</span>
    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="n">fi</span><span class="p">[</span><span class="s1">&#39;numerator&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numerators</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">fi</span><span class="p">[</span><span class="s1">&#39;denominator&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">denominators</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">fi</span> <span class="o">=</span> <span class="n">fi</span><span class="p">[</span><span class="n">fi</span><span class="p">[</span><span class="s1">&#39;denominator&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">]</span> <span class="c1"># Delete Rows where the &#39;denominator&#39; column is 0</span>
    <span class="n">fi</span><span class="p">[</span><span class="s1">&#39;final&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">fi</span><span class="p">[</span><span class="s1">&#39;numerator&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">fi</span><span class="p">[</span><span class="s1">&#39;denominator&#39;</span><span class="p">]</span> <span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
    
    <span class="k">return</span> <span class="n">fi</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@title Run This Cell: Create affordm</span>

<span class="c1">#File: affordm.py</span>
<span class="c1">#Author: Charles Karpati</span>
<span class="c1">#Date: 1/25/19</span>
<span class="c1">#Section: Bnia</span>
<span class="c1">#Email: karpati1@umbc.edu</span>
<span class="c1">#Description: </span>
<span class="c1"># Uses ACS Table B25091 - MORTGAGE STATUS BY SELECTED MONTHLY OWNER COSTS AS A PERCENTAGE OF HOUSEHOLD INCOME IN THE PAST 12 MONTHS</span>
<span class="c1"># Universe: Owner-occupied housing units</span>
<span class="c1"># Table Creates: </span>
<span class="c1">#purpose: Produce Housing and Community Development - Affordability Index - Mortgage Indicator</span>
<span class="c1">#input: </span>
<span class="c1">#output: </span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="k">def</span> <span class="nf">affordm</span><span class="p">(</span> <span class="n">df</span><span class="p">,</span> <span class="n">columnsToInclude</span> <span class="p">):</span>  
    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="c1"># Step 1)</span>
    <span class="c1"># Prepare the columns</span>
    <span class="c1">#~~~~~~~~~~~~~~~ </span>

    <span class="c1"># Final Dataframe  </span>
    <span class="n">fi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B25091_008E&#39;</span><span class="p">,</span><span class="s1">&#39;B25091_009E&#39;</span><span class="p">,</span><span class="s1">&#39;B25091_010E&#39;</span><span class="p">,</span><span class="s1">&#39;B25091_011E&#39;</span><span class="p">,</span><span class="s1">&#39;B25091_002E&#39;</span><span class="p">,</span> <span class="s1">&#39;tract&#39;</span><span class="p">]</span> 
    <span class="n">columns</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">columnsToInclude</span><span class="p">)</span> 
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
        <span class="n">fi</span> <span class="o">=</span> <span class="n">addKey</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">fi</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>

    <span class="c1"># Numerators </span>
    <span class="n">numerators</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B25091_008E&#39;</span><span class="p">,</span><span class="s1">&#39;B25091_009E&#39;</span><span class="p">,</span><span class="s1">&#39;B25091_010E&#39;</span><span class="p">,</span><span class="s1">&#39;B25091_011E&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
        <span class="n">numerators</span> <span class="o">=</span> <span class="n">addKey</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">numerators</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
    
    <span class="c1"># Denominators</span>
    <span class="n">denominators</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B25091_002E&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
        <span class="n">denominators</span> <span class="o">=</span> <span class="n">addKey</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">denominators</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
    <span class="c1"># construct the denominator, returns 0 iff the other two rows are equal.</span>

    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="c1"># Step 3)</span>
    <span class="c1"># Run the Calculation </span>
    <span class="c1"># ( (value[1]+value[2]+value[3]+value[4]) / nullif(value[5],0) )*100</span>
    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="n">fi</span><span class="p">[</span><span class="s1">&#39;numerator&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numerators</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">fi</span><span class="p">[</span><span class="s1">&#39;denominator&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">denominators</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">fi</span> <span class="o">=</span> <span class="n">fi</span><span class="p">[</span><span class="n">fi</span><span class="p">[</span><span class="s1">&#39;denominator&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">]</span> <span class="c1"># Delete Rows where the &#39;denominator&#39; column is 0</span>
    <span class="n">fi</span><span class="p">[</span><span class="s1">&#39;final&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">fi</span><span class="p">[</span><span class="s1">&#39;numerator&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">fi</span><span class="p">[</span><span class="s1">&#39;denominator&#39;</span><span class="p">]</span> <span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
    
    <span class="k">return</span> <span class="n">fi</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@title Run This Cell: Create age5</span>

<span class="c1">#File: age5.py</span>
<span class="c1">#Author: Charles Karpati</span>
<span class="c1">#Date: 4/16/19</span>
<span class="c1">#Section: Bnia</span>
<span class="c1">#Email: karpati1@umbc.edu</span>
<span class="c1">#Description: </span>
<span class="c1"># Uses ACS Table B01001 - SEX BY AGE</span>
<span class="c1"># Universe: Total population</span>
<span class="c1"># Table Creates: tpop, female, male, age5 age18 age24 age64 age65</span>
<span class="c1">#purpose: </span>
<span class="c1">#input: #output: </span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="k">def</span> <span class="nf">age5</span><span class="p">(</span> <span class="n">df</span><span class="p">,</span> <span class="n">columnsToInclude</span> <span class="p">):</span>

  <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="c1"># Step 1)</span>
    <span class="c1"># Prepare the columns</span>
    <span class="c1">#~~~~~~~~~~~~~~~</span>
    <span class="c1"># Final Dataframe  </span>
    <span class="n">fi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B01001_027E_Total_Female_Under_5_years&#39;</span><span class="p">,</span>
               <span class="s1">&#39;B01001_003E_Total_Male_Under_5_years&#39;</span><span class="p">,</span> 
               <span class="s1">&#39;B01001_001E_Total&#39;</span> <span class="p">,</span> <span class="s1">&#39;tract&#39;</span><span class="p">]</span> 
    <span class="n">columns</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">columnsToInclude</span><span class="p">)</span> 
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
        <span class="n">fi</span> <span class="o">=</span> <span class="n">addKey</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">fi</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>

    <span class="c1"># Under 5</span>
    <span class="n">fi</span><span class="p">[</span><span class="s1">&#39;final&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="p">(</span> <span class="n">df</span><span class="p">[</span> <span class="s1">&#39;B01001_003E_Total_Male_Under_5_years&#39;</span> <span class="p">]</span> 
               <span class="o">+</span> <span class="n">df</span><span class="p">[</span> <span class="s1">&#39;B01001_027E_Total_Female_Under_5_years&#39;</span> <span class="p">]</span> 
    <span class="p">)</span> <span class="o">/</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;B01001_001E_Total&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span>

    <span class="k">return</span> <span class="n">fi</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now that our calculations have been created, lets create a final function that will download our data, optionally crosswalk and optionally aggregate it to the community level, and then run/return the appropriate calculation.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@title Run This Cell: createIndicator() Diagram</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@title Run This Cell: Create createIndicator()</span>
<span class="k">def</span> <span class="nf">createIndicator</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">county</span><span class="p">,</span> <span class="n">tract</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">tableId</span><span class="p">,</span> <span class="n">saveAcs</span><span class="p">,</span> <span class="n">cwUrl</span><span class="p">,</span> 
                    <span class="n">local_match_col</span><span class="p">,</span> <span class="n">foreign_match_col</span><span class="p">,</span> <span class="n">foreign_wanted_col</span><span class="p">,</span> 
                    <span class="n">saveCrosswalked</span><span class="p">,</span> <span class="n">saveCrosswalkedFileName</span><span class="p">,</span> <span class="n">groupBy</span><span class="p">,</span> 
                    <span class="n">aggMethod</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">columnsToInclude</span><span class="p">,</span> <span class="n">finalFileName</span><span class="p">):</span>
  <span class="c1"># Pull the data</span>
  <span class="n">df</span> <span class="o">=</span> <span class="n">retrieve_acs_data</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">county</span><span class="p">,</span> <span class="n">tract</span><span class="p">,</span> <span class="n">tableId</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">saveAcs</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Table: &#39;</span> <span class="o">+</span> <span class="n">tableId</span> <span class="o">+</span> <span class="s1">&#39;, Year: &#39;</span> <span class="o">+</span> <span class="n">year</span> <span class="o">+</span> <span class="s1">&#39; imported.&#39;</span><span class="p">)</span>
  
  <span class="c1"># Get the crosswalk </span>
  <span class="k">if</span> <span class="n">cwUrl</span><span class="p">:</span>
    <span class="n">crosswalk</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span> <span class="n">cwUrl</span> <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Crosswalk file imported&#39;</span><span class="p">)</span>
    <span class="c1"># Merge crosswalk with the data</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">mergeDatasets</span><span class="p">(</span> <span class="n">df</span><span class="p">,</span> <span class="n">crosswalk</span><span class="p">,</span> <span class="n">local_match_col</span><span class="p">,</span> <span class="n">foreign_match_col</span><span class="p">,</span> <span class="n">foreign_wanted_col</span><span class="p">,</span> <span class="n">saveCrosswalked</span><span class="p">,</span> <span class="n">saveCrosswalkedFileName</span> <span class="p">)</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Table merged&#39;</span><span class="p">)</span>

  <span class="c1"># Group and Aggregate </span>
  <span class="k">if</span> <span class="n">groupBy</span><span class="p">:</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">groupBy</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Grouped&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">aggMethod</span> <span class="o">==</span> <span class="s1">&#39;sum&#39;</span><span class="p">:</span>
      <span class="n">df</span> <span class="o">=</span> <span class="n">sumInts</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">df</span> <span class="o">=</span> <span class="n">sumInts</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Aggregated&#39;</span><span class="p">)</span>
    
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Creating Indicator&#39;</span><span class="p">)</span>
  <span class="c1"># Create the indicator</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span> <span class="n">df</span><span class="p">,</span> <span class="n">columnsToInclude</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Indicator Created&#39;</span><span class="p">)</span>
  <span class="n">resp</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">finalFileName</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_ALL</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;File Saved&#39;</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">resp</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Our download function will use Baltimore City&#39;s tract, county and state as internal paramters</span>
<span class="c1"># Change these values in the cell below using different geographic reference codes will change those parameters</span>
<span class="n">tract</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span>
<span class="n">county</span> <span class="o">=</span> <span class="s1">&#39;510&#39;</span>
<span class="n">state</span> <span class="o">=</span> <span class="s1">&#39;24&#39;</span>

<span class="c1"># Specify the download parameters the acs download function will receieve here</span>
<span class="n">year</span> <span class="o">=</span> <span class="s1">&#39;17&#39;</span>
<span class="n">saveAcs</span> <span class="o">=</span> <span class="kc">True</span>

<span class="c1"># Specify the crosswalk parameters</span>
<span class="n">baltimore</span> <span class="o">=</span> <span class="s1">&#39;2PACX-1vREwwa_s8Ix39OYGnnS_wA8flOoEkU7reIV4o3ZhlwYhLXhpNEvnOia_uHUDBvnFptkLLHHlaQNvsQE&#39;</span>
<span class="n">cwUrl</span> <span class="o">=</span> <span class="s1">&#39;https://docs.google.com/spreadsheets/d/e/&#39;</span> <span class="o">+</span> <span class="n">baltimore</span> <span class="o">+</span> <span class="s1">&#39;/pub?output=csv&#39;</span>
<span class="n">local_match_col</span> <span class="o">=</span> <span class="s1">&#39;tract&#39;</span>
<span class="n">foreign_match_col</span><span class="o">=</span> <span class="s1">&#39;TRACT2010&#39;</span> 
<span class="n">foreign_wanted_col</span><span class="o">=</span> <span class="s1">&#39;CSA2010&#39;</span>
<span class="n">saveCrosswalked</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">crosswalkedFileName</span> <span class="o">=</span> <span class="kc">False</span>

<span class="n">groupBy</span> <span class="o">=</span> <span class="s1">&#39;CSA2010&#39;</span>
<span class="n">aggMethod</span> <span class="o">=</span> <span class="s1">&#39;sum&#39;</span>
<span class="n">columnsToInclude</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c1"># Alternatively</span>
<span class="c1"># groupBy = False</span>
<span class="c1">#columnsToInclude = [&#39;CSA2010&#39;]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Create the mhhi Indicator</span>
<span class="n">tableId</span> <span class="o">=</span> <span class="s1">&#39;B19001&#39;</span>
<span class="n">finalFileName</span> <span class="o">=</span> <span class="s1">&#39;./mhhi_12July2019_yes.csv&#39;</span>
<span class="c1"># Group By Crosswalked column. Included automatically in final result</span>
<span class="c1"># groupBy = &#39;CSA2010&#39;</span>
<span class="c1"># columnsToInclude = []</span>
<span class="c1"># Do Not Group, Include the Crosswalked Column in the final result</span>
<span class="n">groupBy</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">columnsToInclude</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CSA2010&#39;</span><span class="p">]</span>
<span class="n">method</span> <span class="o">=</span> <span class="n">mhhi</span>
<span class="n">ind1</span> <span class="o">=</span> <span class="n">createIndicator</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">county</span><span class="p">,</span> <span class="n">tract</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">tableId</span><span class="p">,</span> <span class="n">saveAcs</span><span class="p">,</span> <span class="n">cwUrl</span><span class="p">,</span> 
                       <span class="n">local_match_col</span><span class="p">,</span> <span class="n">foreign_match_col</span><span class="p">,</span> <span class="n">foreign_wanted_col</span><span class="p">,</span> <span class="n">saveCrosswalked</span><span class="p">,</span> 
                       <span class="n">crosswalkedFileName</span><span class="p">,</span> <span class="n">groupBy</span><span class="p">,</span> <span class="n">aggMethod</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">columnsToInclude</span><span class="p">,</span> <span class="n">finalFileName</span><span class="p">)</span>
<span class="n">ind1</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Create the trav45 Indicator</span>
<span class="n">tableId</span> <span class="o">=</span> <span class="s1">&#39;B08303&#39;</span>
<span class="n">finalFileName</span> <span class="o">=</span> <span class="s1">&#39;./trav45_20&#39;</span><span class="o">+</span><span class="n">year</span><span class="o">+</span><span class="s1">&#39;_tracts_26July2019.csv&#39;</span>
<span class="n">method</span> <span class="o">=</span> <span class="n">trav45</span>
<span class="n">ind2</span> <span class="o">=</span> <span class="n">createIndicator</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">county</span><span class="p">,</span> <span class="n">tract</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">tableId</span><span class="p">,</span> <span class="n">saveAcs</span><span class="p">,</span> <span class="n">cwUrl</span><span class="p">,</span> 
                       <span class="n">local_match_col</span><span class="p">,</span> <span class="n">foreign_match_col</span><span class="p">,</span> <span class="n">foreign_wanted_col</span><span class="p">,</span> <span class="n">saveCrosswalked</span><span class="p">,</span> 
                       <span class="n">crosswalkedFileName</span><span class="p">,</span> <span class="n">groupBy</span><span class="p">,</span> <span class="n">aggMethod</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">columnsToInclude</span><span class="p">,</span> <span class="n">finalFileName</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Create the trav44 Indicator</span>
<span class="n">tableId</span> <span class="o">=</span> <span class="s1">&#39;B08303&#39;</span>
<span class="n">finalFileName</span> <span class="o">=</span> <span class="s1">&#39;./trav44_20&#39;</span><span class="o">+</span><span class="n">year</span><span class="o">+</span><span class="s1">&#39;_tracts_26July2019.csv&#39;</span>
<span class="n">method</span> <span class="o">=</span> <span class="n">trav44</span>
<span class="n">ind3</span> <span class="o">=</span> <span class="n">createIndicator</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">county</span><span class="p">,</span> <span class="n">tract</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">tableId</span><span class="p">,</span> <span class="n">saveAcs</span><span class="p">,</span> <span class="n">cwUrl</span><span class="p">,</span> 
                       <span class="n">local_match_col</span><span class="p">,</span> <span class="n">foreign_match_col</span><span class="p">,</span> <span class="n">foreign_wanted_col</span><span class="p">,</span> <span class="n">saveCrosswalked</span><span class="p">,</span>
                       <span class="n">crosswalkedFileName</span><span class="p">,</span> <span class="n">groupBy</span><span class="p">,</span> <span class="n">aggMethod</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">columnsToInclude</span><span class="p">,</span> <span class="n">finalFileName</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Create the affordr Indicator</span>
<span class="n">tableId</span> <span class="o">=</span> <span class="s1">&#39;B25070&#39;</span>
<span class="n">finalFileName</span> <span class="o">=</span> <span class="s1">&#39;./affordr_20&#39;</span><span class="o">+</span><span class="n">year</span><span class="o">+</span><span class="s1">&#39;_tracts_26July2019.csv&#39;</span>
<span class="n">method</span> <span class="o">=</span> <span class="n">affordr</span>
<span class="n">ind4</span> <span class="o">=</span> <span class="n">createIndicator</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">county</span><span class="p">,</span> <span class="n">tract</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">tableId</span><span class="p">,</span> <span class="n">saveAcs</span><span class="p">,</span> <span class="n">cwUrl</span><span class="p">,</span> 
                       <span class="n">local_match_col</span><span class="p">,</span> <span class="n">foreign_match_col</span><span class="p">,</span> <span class="n">foreign_wanted_col</span><span class="p">,</span> <span class="n">saveCrosswalked</span><span class="p">,</span> 
                       <span class="n">crosswalkedFileName</span><span class="p">,</span> <span class="n">groupBy</span><span class="p">,</span> <span class="n">aggMethod</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">columnsToInclude</span><span class="p">,</span> <span class="n">finalFileName</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Create the affordm Indicator. Only at the Tract Level this time</span>
<span class="n">tableId</span> <span class="o">=</span> <span class="s1">&#39;B25091&#39;</span>
<span class="n">finalFileName</span> <span class="o">=</span> <span class="s1">&#39;./affordm_20&#39;</span><span class="o">+</span><span class="n">year</span><span class="o">+</span><span class="s1">&#39;_tracts_26July2019.csv&#39;</span>
<span class="n">method</span> <span class="o">=</span> <span class="n">affordm</span>
<span class="n">ind5</span> <span class="o">=</span> <span class="n">createIndicator</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">county</span><span class="p">,</span> <span class="n">tract</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">tableId</span><span class="p">,</span> <span class="n">saveAcs</span><span class="p">,</span> <span class="n">cwUrl</span><span class="p">,</span> 
                       <span class="n">local_match_col</span><span class="p">,</span> <span class="n">foreign_match_col</span><span class="p">,</span> <span class="n">foreign_wanted_col</span><span class="p">,</span> <span class="n">saveCrosswalked</span><span class="p">,</span> 
                       <span class="n">crosswalkedFileName</span><span class="p">,</span> <span class="n">groupBy</span><span class="p">,</span> <span class="n">aggMethod</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">columnsToInclude</span><span class="p">,</span> <span class="n">finalFileName</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Create the age5 Indicator. Only at the Tract Level this time</span>
<span class="n">tableId</span> <span class="o">=</span> <span class="s1">&#39;B01001&#39;</span>
<span class="n">finalFileName</span> <span class="o">=</span> <span class="s1">&#39;./age5_20&#39;</span><span class="o">+</span><span class="n">year</span><span class="o">+</span><span class="s1">&#39;_communities_9Sept2019.csv&#39;</span>
<span class="n">method</span> <span class="o">=</span> <span class="n">age5</span>
<span class="n">groupBy</span> <span class="o">=</span> <span class="s1">&#39;CSA2010&#39;</span>
<span class="n">columnsToInclude</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">ind5</span> <span class="o">=</span> <span class="n">createIndicator</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">county</span><span class="p">,</span> <span class="n">tract</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">tableId</span><span class="p">,</span> <span class="n">saveAcs</span><span class="p">,</span> <span class="n">cwUrl</span><span class="p">,</span> 
                       <span class="n">local_match_col</span><span class="p">,</span> <span class="n">foreign_match_col</span><span class="p">,</span> <span class="n">foreign_wanted_col</span><span class="p">,</span> <span class="n">saveCrosswalked</span><span class="p">,</span> 
                       <span class="n">crosswalkedFileName</span><span class="p">,</span> <span class="n">groupBy</span><span class="p">,</span> <span class="n">aggMethod</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">columnsToInclude</span><span class="p">,</span> <span class="n">finalFileName</span><span class="p">)</span>
<span class="n">ind5</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Number of Columns 49
Table: B01001, Year: 17 imported.
Crosswalk file imported
df True cw True cs True
SavingCrosswalk
Table merged
Grouped
Aggregated
Creating Indicator
Indicator Created
File Saved
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>B01001_027E_Total_Female_Under_5_years</th>
      <th>B01001_003E_Total_Male_Under_5_years</th>
      <th>B01001_001E_Total</th>
      <th>tract</th>
      <th>final</th>
    </tr>
    <tr>
      <th>CSA2010</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Allendale/Irvington/S. Hilton</th>
      <td>525</td>
      <td>581</td>
      <td>16726</td>
      <td>1333309</td>
      <td>6.612460</td>
    </tr>
    <tr>
      <th>Baltimore City</th>
      <td>20119</td>
      <td>20660</td>
      <td>619796</td>
      <td>10000</td>
      <td>6.579423</td>
    </tr>
    <tr>
      <th>Beechfield/Ten Hills/West Hills</th>
      <td>491</td>
      <td>571</td>
      <td>13391</td>
      <td>810905</td>
      <td>7.930700</td>
    </tr>
    <tr>
      <th>Belair-Edison</th>
      <td>436</td>
      <td>506</td>
      <td>17380</td>
      <td>680806</td>
      <td>5.420023</td>
    </tr>
    <tr>
      <th>Brooklyn/Curtis Bay/Hawkins Point</th>
      <td>908</td>
      <td>499</td>
      <td>12900</td>
      <td>1001903</td>
      <td>10.906977</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="MAPPING">MAPPING<a class="anchor-link" href="#MAPPING"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Census Geographic Data:</p>
<ul>
<li><strong>Geographic Coordinate Data</strong> is provided by the census and compliments their census geographies </li>
<li><a href="https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-line-file.2010.html">https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-line-file.2010.html</a></li>
<li><a href="https://www.census.gov/programs-surveys/acs/geography-acs/geography-boundaries-by-year.html">https://www.census.gov/programs-surveys/acs/geography-acs/geography-boundaries-by-year.html</a> </li>
<li>Bnia created and provides for free geographic boundary data that compliment these CSA's</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># pd.set_option(&#39;display.expand_frame_repr&#39;, False)</span>
<span class="c1"># pd.set_option(&#39;display.precision&#39;, 2)</span>
<span class="c1"># pd.reset_option(&#39;max_colwidth&#39;)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;max_colwidth&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="c1"># pd.reset_option(&#39;max_colwidth&#39;)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Importing Point Data:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Create the mhhi Indicator</span>
<span class="n">tableId</span> <span class="o">=</span> <span class="s1">&#39;B19001&#39;</span>
<span class="n">finalFileName</span> <span class="o">=</span> <span class="s1">&#39;./mhhi_12July2019_yes.csv&#39;</span>

<span class="n">baltimore</span> <span class="o">=</span> <span class="s1">&#39;2PACX-1vREwwa_s8Ix39OYGnnS_wA8flOoEkU7reIV4o3ZhlwYhLXhpNEvnOia_uHUDBvnFptkLLHHlaQNvsQE&#39;</span>
<span class="n">cwUrl</span> <span class="o">=</span> <span class="s1">&#39;https://docs.google.com/spreadsheets/d/e/&#39;</span> <span class="o">+</span> <span class="n">baltimore</span> <span class="o">+</span> <span class="s1">&#39;/pub?output=csv&#39;</span>

<span class="n">method</span> <span class="o">=</span> <span class="n">mhhi</span>
<span class="n">local_match_col</span> <span class="o">=</span> <span class="s1">&#39;tract&#39;</span>
<span class="n">foreign_match_col</span><span class="o">=</span> <span class="s1">&#39;TRACT2010&#39;</span> 
<span class="n">foreign_wanted_col</span><span class="o">=</span> <span class="s1">&#39;CSA2010&#39;</span>

<span class="n">aggMethod</span> <span class="o">=</span> <span class="s1">&#39;sum&#39;</span>
<span class="n">groupBy</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">columnsToInclude</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CSA2010&#39;</span><span class="p">]</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">createIndicator</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">county</span><span class="p">,</span> <span class="n">tract</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">tableId</span><span class="p">,</span> <span class="n">saveAcs</span><span class="p">,</span> <span class="n">cwUrl</span><span class="p">,</span> 
                     <span class="n">local_match_col</span><span class="p">,</span> <span class="n">foreign_match_col</span><span class="p">,</span> <span class="n">foreign_wanted_col</span><span class="p">,</span> 
                     <span class="n">saveCrosswalked</span><span class="p">,</span> <span class="n">crosswalkedFileName</span><span class="p">,</span> <span class="n">groupBy</span><span class="p">,</span> <span class="n">aggMethod</span><span class="p">,</span> 
                     <span class="n">method</span><span class="p">,</span> <span class="n">columnsToInclude</span><span class="p">,</span> <span class="n">finalFileName</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Number of Columns 17
Table: B19001, Year: 17 imported.
Crosswalk file imported
df True cw True cs True
SavingCrosswalk
Table merged
Creating Indicator
INCLUDING COLUMN(s):[&#39;CSA2010&#39;, &#39;tract&#39;]
Indicator Created
File Saved
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>B19001_002E_Total_Less_than_$10_000</th>
      <th>B19001_003E_Total_$10_000_to_$14_999</th>
      <th>B19001_004E_Total_$15_000_to_$19_999</th>
      <th>B19001_005E_Total_$20_000_to_$24_999</th>
      <th>B19001_006E_Total_$25_000_to_$29_999</th>
      <th>B19001_007E_Total_$30_000_to_$34_999</th>
      <th>B19001_008E_Total_$35_000_to_$39_999</th>
      <th>B19001_009E_Total_$40_000_to_$44_999</th>
      <th>B19001_010E_Total_$45_000_to_$49_999</th>
      <th>B19001_011E_Total_$50_000_to_$59_999</th>
      <th>B19001_012E_Total_$60_000_to_$74_999</th>
      <th>B19001_013E_Total_$75_000_to_$99_999</th>
      <th>B19001_014E_Total_$100_000_to_$124_999</th>
      <th>B19001_015E_Total_$125_000_to_$149_999</th>
      <th>B19001_016E_Total_$150_000_to_$199_999</th>
      <th>B19001_017E_Total_$200_000_or_more</th>
      <th>midpoint</th>
      <th>midpoint_index</th>
      <th>midpoint_index_value</th>
      <th>midpoint_index_lower</th>
      <th>midpoint_index_range</th>
      <th>midpoint_index_minus_one_cumulative_sum</th>
      <th>final</th>
      <th>CSA2010</th>
      <th>tract</th>
    </tr>
    <tr>
      <th>NAME</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Census Tract 1901</th>
      <td>237</td>
      <td>313</td>
      <td>398</td>
      <td>436</td>
      <td>515</td>
      <td>558</td>
      <td>594</td>
      <td>629</td>
      <td>644</td>
      <td>687</td>
      <td>732</td>
      <td>771</td>
      <td>776</td>
      <td>776</td>
      <td>782</td>
      <td>796</td>
      <td>398.0</td>
      <td>3</td>
      <td>38</td>
      <td>20000</td>
      <td>4999</td>
      <td>398</td>
      <td>20000.000000</td>
      <td>Southwest Baltimore</td>
      <td>190100</td>
    </tr>
    <tr>
      <th>Census Tract 1902</th>
      <td>63</td>
      <td>150</td>
      <td>243</td>
      <td>249</td>
      <td>307</td>
      <td>337</td>
      <td>351</td>
      <td>380</td>
      <td>403</td>
      <td>441</td>
      <td>554</td>
      <td>624</td>
      <td>630</td>
      <td>662</td>
      <td>673</td>
      <td>695</td>
      <td>347.5</td>
      <td>6</td>
      <td>14</td>
      <td>35000</td>
      <td>4999</td>
      <td>337</td>
      <td>38749.250000</td>
      <td>Southwest Baltimore</td>
      <td>190200</td>
    </tr>
    <tr>
      <th>Census Tract 2201</th>
      <td>137</td>
      <td>366</td>
      <td>490</td>
      <td>542</td>
      <td>620</td>
      <td>707</td>
      <td>757</td>
      <td>837</td>
      <td>850</td>
      <td>1067</td>
      <td>1133</td>
      <td>1292</td>
      <td>1497</td>
      <td>1664</td>
      <td>1810</td>
      <td>2208</td>
      <td>1104.0</td>
      <td>10</td>
      <td>66</td>
      <td>60000</td>
      <td>14999</td>
      <td>1067</td>
      <td>68408.530303</td>
      <td>Inner Harbor/Fed...</td>
      <td>220100</td>
    </tr>
    <tr>
      <th>Census Tract 2303</th>
      <td>3</td>
      <td>23</td>
      <td>23</td>
      <td>62</td>
      <td>69</td>
      <td>69</td>
      <td>98</td>
      <td>106</td>
      <td>115</td>
      <td>159</td>
      <td>188</td>
      <td>286</td>
      <td>397</td>
      <td>460</td>
      <td>554</td>
      <td>632</td>
      <td>316.0</td>
      <td>12</td>
      <td>111</td>
      <td>100000</td>
      <td>24999</td>
      <td>286</td>
      <td>106756.486486</td>
      <td>South Baltimore</td>
      <td>230300</td>
    </tr>
    <tr>
      <th>Census Tract 2502.07</th>
      <td>102</td>
      <td>130</td>
      <td>231</td>
      <td>295</td>
      <td>399</td>
      <td>475</td>
      <td>516</td>
      <td>556</td>
      <td>603</td>
      <td>675</td>
      <td>703</td>
      <td>763</td>
      <td>782</td>
      <td>809</td>
      <td>824</td>
      <td>836</td>
      <td>418.0</td>
      <td>5</td>
      <td>76</td>
      <td>30000</td>
      <td>4999</td>
      <td>399</td>
      <td>31249.750000</td>
      <td>Cherry Hill</td>
      <td>250207</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Importing Geom Data</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># The Google Spreadsheet is public. All other links are private and on my google drive</span>
<span class="c1"># string = &#39;boundariesr-baltimore-tracts-NoWater-2010&#39;</span>
<span class="c1"># string = &#39;boundaries-baltimore-communities-NoWater-2010&#39;</span>
<span class="c1"># string = &#39;boundaries-baltimore-neighborhoods&#39;</span>
<span class="c1"># string = &#39;boundaries-moco-census-tracts-2010&#39;</span>
<span class="c1"># string = &#39;boundaries-maryland_census-tracts-2010&#39;</span>
<span class="c1"># string = &#39;boundaries-maryland-counties&#39;</span>
<span class="c1"># string = &#39;https://docs.google.com/spreadsheets/d/e/2PACX-1vRWBYggh3LGJ3quU-PhGXT2NvAtUb3aiXdZVKAO5VWCreUWZpAGz1uTbLvq6rF1TrJNiE81o6R5AP8F/pub?output=csv&#39; # GoogleSpreadsheet Baltimore Tracts</span>
<span class="c1"># string = &#39;https://docs.google.com/spreadsheets/d/e/2PACX-1vSIJpLSmdQkvqJ3Wk6ONJmj_qHBgG_1naDxd0KcNyrT2LoJhqhoRSMtY1kyjy__xZ4Y8UN-tMNNAUa-/pub?output=csv&#39; # GoogleSpreadsheet Evanston Tracts</span>
<span class="c1"># The file extension is used to determine the appropriate import method.</span>
<span class="n">ext</span> <span class="o">=</span> <span class="s1">&#39;.csv&#39;</span>
<span class="c1"># ext = &#39;.geojson&#39;</span>
<span class="c1"># ext = &#39;.json&#39;</span>
<span class="c1"># ext = &#39;.kml&#39;</span>
<span class="c1"># ext = &#39;googleSpreadSheet&#39;</span>
<span class="c1"># This is where the findFile function comes in handy</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">findFile</span><span class="p">(</span><span class="s1">&#39;../&#39;</span><span class="p">,</span> <span class="n">string</span><span class="o">+</span><span class="n">ext</span><span class="p">)</span>

<span class="n">geomData</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s1">&#39;.geojson&#39;</span> <span class="ow">or</span> <span class="n">ext</span> <span class="o">==</span> <span class="s1">&#39;.kml&#39;</span> <span class="ow">or</span> <span class="n">ext</span> <span class="o">==</span> <span class="s1">&#39;.json&#39;</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
  <span class="n">geomData</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>  
<span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s1">&#39;.csv&#39;</span> <span class="ow">or</span> <span class="n">ext</span> <span class="o">==</span> <span class="s1">&#39;googleSpreadSheet&#39;</span><span class="p">:</span>
  <span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s1">&#39;googleSpreadSheet&#39;</span><span class="p">:</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">string</span>
  <span class="n">geomData</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
  <span class="n">geomData</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">geomData</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">loads</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">))</span>
  <span class="n">geomData</span> <span class="o">=</span> <span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">geomData</span><span class="p">,</span> <span class="n">geometry</span><span class="o">=</span><span class="s1">&#39;geometry&#39;</span><span class="p">)</span>

<span class="n">geomData</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">geomData</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Save the Geom Dataset as geojson and csv form if not already</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s1">&#39;.csv&#39;</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;saving csv as geojson&#39;</span><span class="p">)</span>
  <span class="n">geomData</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">string</span><span class="o">+</span><span class="s2">&quot;.geojson&quot;</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GeoJSON&#39;</span><span class="p">)</span>
  
<span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s1">&#39;.geojson&#39;</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;saving geojson as csv&#39;</span><span class="p">)</span>
  <span class="n">geomData</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">string</span><span class="o">+</span><span class="s1">&#39;.csv&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_ALL</span><span class="p">)</span>

<span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s1">&#39;.json&#39;</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;saving json as csv and geojson&#39;</span><span class="p">)</span>
  <span class="n">geomData</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">string</span><span class="o">+</span><span class="s1">&#39;.csv&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_ALL</span><span class="p">)</span>
  <span class="n">geomData</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">string</span><span class="o">+</span><span class="s2">&quot;.geojson&quot;</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GeoJSON&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s1">&#39;.kml&#39;</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;saving kml as csv and geojson&#39;</span><span class="p">)</span>
  <span class="n">geomData</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">string</span><span class="o">+</span><span class="s1">&#39;.csv&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_ALL</span><span class="p">)</span>
  <span class="n">geomData</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">string</span><span class="o">+</span><span class="s2">&quot;.geojson&quot;</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GeoJSON&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>saving geojson as csv
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Crosswalking Boundarys:</p>
<p>We can use the Geometry Data as a crosswalk and pass over the geometries to our principal dataset.</p>
<p>The crosswalkIt function must have been previously ran for this option to work.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">local_match_col</span> <span class="o">=</span> <span class="s1">&#39;tract&#39;</span>
<span class="n">foreign_match_col</span> <span class="o">=</span> <span class="s1">&#39;TRACTCE10&#39;</span>

<span class="c1">#local_match_col = &#39;CSA2010&#39;</span>
<span class="c1">#foreign_match_col = &#39;CSA&#39;</span>
<span class="n">foreign_wanted_col</span> <span class="o">=</span> <span class="s1">&#39;geometry&#39;</span>

<span class="n">gdf</span> <span class="o">=</span> <span class="n">crosswalkIt</span><span class="p">(</span> <span class="n">geomData</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">local_match_col</span><span class="p">,</span> <span class="n">foreign_match_col</span><span class="p">,</span> <span class="n">foreign_wanted_col</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span> <span class="p">)</span>

<span class="c1"># After crosswalking our boundaries, we need to make sure they are being interpreted like that.</span>
<span class="n">gdf</span> <span class="o">=</span> <span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">geometry</span><span class="o">=</span><span class="n">foreign_wanted_col</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Local Column Values Not Matched 
[ 10000  10100  10200  10300  10400  10500  20100  20200  20300  30100
  30200  40100  40200  60100  60200  60300  60400  70100  70200  70300
  70400  80101  80102  80200  80301  80302  80400  80500  80600  80700
  80800  90100  90200  90300  90400  90500  90600  90700  90800  90900
 100100 100200 100300 110100 110200 120100 120201 120202 120300 120400
 120500 120600 120700 130100 130200 130300 130400 130600 130700 130803
 130804 130805 130806 140100 140200 140300 150100 150200 150300 150400
 150500 150600 150701 150702 150800 150900 151000 151100 151200 151300
 160100 160200 160300 160400 160500 160600 160700 160801 160802 170100
 170200 170300 180100 180200 180300 190100 190200 190300 200100 200200
 200300 200400 200500 200600 200701 200702 200800 210100 210200 220100
 230100 230200 230300 240100 240200 240300 240400 250101 250102 250103
 250203 250204 250205 250206 250207 250301 250303 250401 250402 250500
 250600 260101 260102 260201 260202 260203 260301 260302 260303 260401
 260402 260403 260404 260501 260604 260605 260700 260800 260900 261000
 261100 270101 270102 270200 270301 270302 270401 270402 270501 270502
 270600 270701 270702 270703 270801 270802 270803 270804 270805 270901
 270902 270903 271001 271002 271101 271102 271200 271300 271400 271501
 271503 271600 271700 271801 271802 271900 272003 272004 272005 272006
 272007 280101 280102 280200 280301 280302 280401 280402 280403 280404
 280500]
201

Crosswalk Unique Column Values
[809600 809700 809800 809900 810000 810100 810200 810301 810302 808702
 808800 808900 809000 809100 809200 809300 809400 809500]
SavingCrosswalk
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Light Data Exploration</span>
<span class="n">gdf</span><span class="o">.</span><span class="n">crs</span>
<span class="nb">type</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>
<span class="n">gdf</span><span class="o">.</span><span class="n">columns</span>
<span class="n">gdf</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="n">gdf</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="c1"># Ensure your aggregation is correctly set for the crosswalk to work.</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>geopandas.geodataframe.GeoDataFrame</pre>
</div>

</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Index([&#39;B19001_002E_Total_Less_than_$10_000&#39;,
       &#39;B19001_003E_Total_$10_000_to_$14_999&#39;,
       &#39;B19001_004E_Total_$15_000_to_$19_999&#39;,
       &#39;B19001_005E_Total_$20_000_to_$24_999&#39;,
       &#39;B19001_006E_Total_$25_000_to_$29_999&#39;,
       &#39;B19001_007E_Total_$30_000_to_$34_999&#39;,
       &#39;B19001_008E_Total_$35_000_to_$39_999&#39;,
       &#39;B19001_009E_Total_$40_000_to_$44_999&#39;,
       &#39;B19001_010E_Total_$45_000_to_$49_999&#39;,
       &#39;B19001_011E_Total_$50_000_to_$59_999&#39;,
       &#39;B19001_012E_Total_$60_000_to_$74_999&#39;,
       &#39;B19001_013E_Total_$75_000_to_$99_999&#39;,
       &#39;B19001_014E_Total_$100_000_to_$124_999&#39;,
       &#39;B19001_015E_Total_$125_000_to_$149_999&#39;,
       &#39;B19001_016E_Total_$150_000_to_$199_999&#39;,
       &#39;B19001_017E_Total_$200_000_or_more&#39;, &#39;midpoint&#39;, &#39;midpoint_index&#39;,
       &#39;midpoint_index_value&#39;, &#39;midpoint_index_lower&#39;, &#39;midpoint_index_range&#39;,
       &#39;midpoint_index_minus_one_cumulative_sum&#39;, &#39;final&#39;, &#39;CSA2010&#39;, &#39;tract&#39;,
       &#39;geometry&#39;],
      dtype=&#39;object&#39;)</pre>
</div>

</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>B19001_002E_Total_Less_than_$10_000</th>
      <th>B19001_003E_Total_$10_000_to_$14_999</th>
      <th>B19001_004E_Total_$15_000_to_$19_999</th>
      <th>B19001_005E_Total_$20_000_to_$24_999</th>
      <th>B19001_006E_Total_$25_000_to_$29_999</th>
      <th>B19001_007E_Total_$30_000_to_$34_999</th>
      <th>B19001_008E_Total_$35_000_to_$39_999</th>
      <th>B19001_009E_Total_$40_000_to_$44_999</th>
      <th>B19001_010E_Total_$45_000_to_$49_999</th>
      <th>B19001_011E_Total_$50_000_to_$59_999</th>
      <th>B19001_012E_Total_$60_000_to_$74_999</th>
      <th>B19001_013E_Total_$75_000_to_$99_999</th>
      <th>B19001_014E_Total_$100_000_to_$124_999</th>
      <th>B19001_015E_Total_$125_000_to_$149_999</th>
      <th>B19001_016E_Total_$150_000_to_$199_999</th>
      <th>B19001_017E_Total_$200_000_or_more</th>
      <th>midpoint</th>
      <th>midpoint_index</th>
      <th>midpoint_index_value</th>
      <th>midpoint_index_lower</th>
      <th>midpoint_index_range</th>
      <th>midpoint_index_minus_one_cumulative_sum</th>
      <th>final</th>
      <th>CSA2010</th>
      <th>tract</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
</div>
</div>

</div>

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>/usr/local/lib/python3.6/dist-packages/geopandas/plotting.py:418: UserWarning: The GeoDataFrame you are attempting to plot is empty. Nothing has been displayed.
  &#34;empty. Nothing has been displayed.&#34;, UserWarning)
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fe5dae52ac8&gt;</pre>
</div>

</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQYAAAD8CAYAAACVSwr3AAAABHNCSVQICAgIfAhkiAAAAAlwSFlz
AAALEgAACxIB0t1+/AAAADl0RVh0U29mdHdhcmUAbWF0cGxvdGxpYiB2ZXJzaW9uIDMuMC4zLCBo
dHRwOi8vbWF0cGxvdGxpYi5vcmcvnQurowAADGxJREFUeJzt23GIpHd9x/H3x1xTaRq1mBXk7jSR
XhqvtpB0SVOEmmJaLinc/WGROwhtSsihNVJQCimWVOJfVmpBuNZeqUQFjad/lAVPArWRgHgxGxJj
7kJkPW1zUZozpv4jGkO//WMm7WS/u5knd7Mzt/X9goV5nvntzHeH4X3PPPNcqgpJmvSKRQ8g6cJj
GCQ1hkFSYxgkNYZBUmMYJDVTw5DkE0meTvLYJvcnyceSrCV5NMk1sx9T0jwNOWK4G9j3EvffCOwZ
/xwG/uH8x5K0SFPDUFX3Az98iSUHgE/VyAngNUleP6sBJc3fjhk8xk7gyYntM+N931+/MMlhRkcV
XHLJJb911VVXzeDpJW3moYce+kFVLb3c35tFGAarqqPAUYDl5eVaXV2d59NLP3eS/Pu5/N4svpV4
Ctg9sb1rvE/SNjWLMKwAfzz+duI64EdV1T5GSNo+pn6USPJZ4HrgsiRngL8GfgGgqj4OHAduAtaA
HwN/ulXDSpqPqWGoqkNT7i/gPTObSNLCeeWjpMYwSGoMg6TGMEhqDIOkxjBIagyDpMYwSGoMg6TG
MEhqDIOkxjBIagyDpMYwSGoMg6TGMEhqDIOkxjBIagyDpMYwSGoMg6TGMEhqDIOkxjBIagyDpMYw
SGoMg6TGMEhqDIOkxjBIagyDpMYwSGoMg6TGMEhqDIOkZlAYkuxL8kSStSR3bHD/G5Lcl+ThJI8m
uWn2o0qal6lhSHIRcAS4EdgLHEqyd92yvwKOVdXVwEHg72c9qKT5GXLEcC2wVlWnq+o54B7gwLo1
BbxqfPvVwPdmN6KkeRsShp3AkxPbZ8b7Jn0QuDnJGeA48N6NHijJ4SSrSVbPnj17DuNKmodZnXw8
BNxdVbuAm4BPJ2mPXVVHq2q5qpaXlpZm9NSSZm1IGJ4Cdk9s7xrvm3QrcAygqr4GvBK4bBYDSpq/
IWF4ENiT5IokFzM6ubiybs1/AG8HSPJmRmHws4K0TU0NQ1U9D9wO3As8zujbh5NJ7kqyf7zs/cBt
Sb4BfBa4papqq4aWtLV2DFlUVccZnVSc3HfnxO1TwFtnO5qkRfHKR0mNYZDUGAZJjWGQ1BgGSY1h
kNQYBkmNYZDUGAZJjWGQ1BgGSY1hkNQYBkmNYZDUGAZJjWGQ1BgGSY1hkNQYBkmNYZDUGAZJjWGQ
1BgGSY1hkNQYBkmNYZDUGAZJjWGQ1BgGSY1hkNQYBkmNYZDUGAZJjWGQ1AwKQ5J9SZ5Ispbkjk3W
vDPJqSQnk3xmtmNKmqcd0xYkuQg4Avw+cAZ4MMlKVZ2aWLMH+EvgrVX1bJLXbdXAkrbekCOGa4G1
qjpdVc8B9wAH1q25DThSVc8CVNXTsx1T0jwNCcNO4MmJ7TPjfZOuBK5M8tUkJ5Ls2+iBkhxOsppk
9ezZs+c2saQtN6uTjzuAPcD1wCHgn5K8Zv2iqjpaVctVtby0tDSjp5Y0a0PC8BSwe2J713jfpDPA
SlX9rKq+A3yLUSgkbUNDwvAgsCfJFUkuBg4CK+vW/AujowWSXMboo8XpGc4paY6mhqGqngduB+4F
HgeOVdXJJHcl2T9edi/wTJJTwH3AX1TVM1s1tKStlapayBMvLy/X6urqQp5b+nmR5KGqWn65v+eV
j5IawyCpMQySGsMgqTEMkhrDIKkxDJIawyCpMQySGsMgqTEMkhrDIKkxDJIawyCpMQySGsMgqTEM
khrDIKkxDJIawyCpMQySGsMgqTEMkhrDIKkxDJIawyCpMQySGsMgqTEMkhrDIKkxDJIawyCpMQyS
GsMgqTEMkppBYUiyL8kTSdaS3PES696RpJIsz25ESfM2NQxJLgKOADcCe4FDSfZusO5S4M+BB2Y9
pKT5GnLEcC2wVlWnq+o54B7gwAbrPgR8GPjJDOeTtABDwrATeHJi+8x43/9Kcg2wu6q++FIPlORw
ktUkq2fPnn3Zw0qaj/M++ZjkFcBHgfdPW1tVR6tquaqWl5aWzvepJW2RIWF4Ctg9sb1rvO8FlwJv
Ab6S5LvAdcCKJyCl7WtIGB4E9iS5IsnFwEFg5YU7q+pHVXVZVV1eVZcDJ4D9VbW6JRNL2nJTw1BV
zwO3A/cCjwPHqupkkruS7N/qASXN344hi6rqOHB83b47N1l7/fmPJWmRvPJRUmMYJDWGQVJjGCQ1
hkFSYxgkNYZBUmMYJDWGQVJjGCQ1hkFSYxgkNYZBUmMYJDWGQVJjGCQ1hkFSYxgkNYZBUmMYJDWG
QVJjGCQ1hkFSYxgkNYZBUmMYJDWGQVJjGCQ1hkFSYxgkNYZBUmMYJDWGQVJjGCQ1g8KQZF+SJ5Ks
Jbljg/vfl+RUkkeTfDnJG2c/qqR5mRqGJBcBR4Abgb3AoSR71y17GFiuqt8EvgD8zawHlTQ/Q44Y
rgXWqup0VT0H3AMcmFxQVfdV1Y/HmyeAXbMdU9I8DQnDTuDJie0z432buRX40kZ3JDmcZDXJ6tmz
Z4dPKWmuZnryMcnNwDLwkY3ur6qjVbVcVctLS0uzfGpJM7RjwJqngN0T27vG+14kyQ3AB4C3VdVP
ZzOepEUYcsTwILAnyRVJLgYOAiuTC5JcDfwjsL+qnp79mJLmaWoYqup54HbgXuBx4FhVnUxyV5L9
42UfAX4Z+HySR5KsbPJwkraBIR8lqKrjwPF1++6cuH3DjOeStEBe+SipMQySGsMgqTEMkhrDIKkx
DJIawyCpMQySGsMgqTEMkhrDIKkxDJIawyCpMQySGsMgqTEMkhrDIKkxDJIawyCpMQySGsMgqTEM
khrDIKkxDJIawyCpMQySGsMgqTEMkhrDIKkxDJIawyCpMQySGsMgqTEMkhrDIKkZFIYk+5I8kWQt
yR0b3P+LST43vv+BJJfPelBJ8zM1DEkuAo4ANwJ7gUNJ9q5bdivwbFX9KvB3wIdnPaik+RlyxHAt
sFZVp6vqOeAe4MC6NQeAT45vfwF4e5LMbkxJ87RjwJqdwJMT22eA395sTVU9n+RHwGuBH0wuSnIY
ODze/GmSx85l6AW5jHV/zwVsO80K22ve7TQrwK+dyy8NCcPMVNVR4ChAktWqWp7n85+P7TTvdpoV
tte822lWGM17Lr835KPEU8Duie1d430brkmyA3g18My5DCRp8YaE4UFgT5IrklwMHARW1q1ZAf5k
fPuPgH+rqprdmJLmaepHifE5g9uBe4GLgE9U1ckkdwGrVbUC/DPw6SRrwA8ZxWOao+cx9yJsp3m3
06ywvebdTrPCOc4b/2GXtJ5XPkpqDIOkZsvDsJ0upx4w6/uSnEryaJIvJ3njIuacmOcl551Y944k
lWRhX7MNmTXJO8ev78kkn5n3jOtmmfZeeEOS+5I8PH4/3LSIOcezfCLJ05tdF5SRj43/lkeTXDP1
Qatqy34Ynaz8NvAm4GLgG8DedWv+DPj4+PZB4HNbOdN5zvp7wC+Nb797UbMOnXe87lLgfuAEsHyh
zgrsAR4GfmW8/boL+bVldFLv3ePbe4HvLnDe3wWuAR7b5P6bgC8BAa4DHpj2mFt9xLCdLqeeOmtV
3VdVPx5vnmB0TceiDHltAT7E6P+u/GSew60zZNbbgCNV9SxAVT095xknDZm3gFeNb78a+N4c53vx
IFX3M/o2cDMHgE/VyAngNUle/1KPudVh2Ohy6p2bramq54EXLqeetyGzTrqVUYUXZeq840PG3VX1
xXkOtoEhr+2VwJVJvprkRJJ9c5uuGzLvB4Gbk5wBjgPvnc9o5+Tlvrfne0n0/xdJbgaWgbctepbN
JHkF8FHglgWPMtQORh8nrmd0JHZ/kt+oqv9a6FSbOwTcXVV/m+R3GF3H85aq+u9FDzYLW33EsJ0u
px4yK0luAD4A7K+qn85pto1Mm/dS4C3AV5J8l9Fny5UFnYAc8tqeAVaq6mdV9R3gW4xCsQhD5r0V
OAZQVV8DXsnoP1hdiAa9t19ki0+K7ABOA1fwfydxfn3dmvfw4pOPxxZ0AmfIrFczOim1ZxEzvtx5
163/Cos7+Tjktd0HfHJ8+zJGh76vvYDn/RJwy/j2mxmdY8gC3w+Xs/nJxz/kxScfvz718eYw8E2M
6v9t4APjfXcx+hcXRqX9PLAGfB140wJf3Gmz/ivwn8Aj45+VRc06ZN51axcWhoGvbRh99DkFfBM4
eCG/toy+ifjqOBqPAH+wwFk/C3wf+BmjI69bgXcB75p4bY+M/5ZvDnkfeEm0pMYrHyU1hkFSYxgk
NYZBUmMYJDWGQVJjGCQ1/wMKpFHVdp3xCwAAAABJRU5ErkJggg==
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Lets-make-a-GIF">Lets make a GIF<a class="anchor-link" href="#Lets-make-a-GIF"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Reading in the Names Crosswalk with a URL.</p>
<p>We will Read in our Boundaries Crosswalk next.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Names Crosswalk.</span>
<span class="n">evanston</span> <span class="o">=</span> <span class="s1">&#39;2PACX-1vSIJpLSmdQkvqJ3Wk6ONJmj_qHBgG_1naDxd0KcNyrT2LoJhqhoRSMtY1kyjy__xZ4Y8UN-tMNNAUa-&#39;</span>
<span class="n">baltComm</span> <span class="o">=</span> <span class="s1">&#39;2PACX-1vREwwa_s8Ix39OYGnnS_wA8flOoEkU7reIV4o3ZhlwYhLXhpNEvnOia_uHUDBvnFptkLLHHlaQNvsQE&#39;</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://docs.google.com/spreadsheets/d/e/&#39;</span> <span class="o">+</span> <span class="n">evanston</span> <span class="o">+</span> <span class="s1">&#39;/pub?output=csv&#39;</span> 
<span class="n">namesCw</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span> <span class="n">url</span> <span class="p">)</span>
<span class="n">namesCw</span><span class="o">.</span><span class="n">columns</span>
<span class="n">namesCw</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Index([&#39;OBJECTID&#39;, &#39;STATEFP10&#39;, &#39;COUNTYFP10&#39;, &#39;TRACTCE10&#39;, &#39;GEOID10&#39;, &#39;NAME10&#39;,
       &#39;NAMELSAD10&#39;, &#39;MTFCC10&#39;, &#39;FUNCSTAT10&#39;, &#39;ALAND10&#39;, &#39;AWATER10&#39;,
       &#39;INTPTLAT10&#39;, &#39;INTPTLON10&#39;, &#39;created_user&#39;, &#39;created_date&#39;,
       &#39;last_edited_user&#39;, &#39;last_edited_date&#39;, &#39;GEOID10num&#39;, &#39;Tract10Num&#39;,
       &#39;ShapeSTArea&#39;, &#39;ShapeSTLength&#39;, &#39;geometry&#39;],
      dtype=&#39;object&#39;)</pre>
</div>

</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>OBJECTID</th>
      <th>STATEFP10</th>
      <th>COUNTYFP10</th>
      <th>TRACTCE10</th>
      <th>GEOID10</th>
      <th>NAME10</th>
      <th>NAMELSAD10</th>
      <th>MTFCC10</th>
      <th>FUNCSTAT10</th>
      <th>ALAND10</th>
      <th>AWATER10</th>
      <th>INTPTLAT10</th>
      <th>INTPTLON10</th>
      <th>created_user</th>
      <th>created_date</th>
      <th>last_edited_user</th>
      <th>last_edited_date</th>
      <th>GEOID10num</th>
      <th>Tract10Num</th>
      <th>ShapeSTArea</th>
      <th>ShapeSTLength</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>19</td>
      <td>17</td>
      <td>31</td>
      <td>809600</td>
      <td>17031809600</td>
      <td>8096.0</td>
      <td>Census Tract 8096</td>
      <td>G5020</td>
      <td>S</td>
      <td>1300137</td>
      <td>0</td>
      <td>42.044745</td>
      <td>-87.699904</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MVARNER</td>
      <td>2019-05-01T21:06:24</td>
      <td>17031809600</td>
      <td>809600</td>
      <td>1.398329e+07</td>
      <td>15853.66701</td>
      <td>POLYGON ((-87.70...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>20</td>
      <td>17</td>
      <td>31</td>
      <td>809700</td>
      <td>17031809700</td>
      <td>8097.0</td>
      <td>Census Tract 8097</td>
      <td>G5020</td>
      <td>S</td>
      <td>1323073</td>
      <td>0</td>
      <td>42.037466</td>
      <td>-87.699915</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MVARNER</td>
      <td>2019-05-01T21:06:24</td>
      <td>17031809700</td>
      <td>809700</td>
      <td>1.422420e+07</td>
      <td>16063.03870</td>
      <td>POLYGON ((-87.70...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>21</td>
      <td>17</td>
      <td>31</td>
      <td>809800</td>
      <td>17031809800</td>
      <td>8098.0</td>
      <td>Census Tract 8098</td>
      <td>G5020</td>
      <td>S</td>
      <td>597774</td>
      <td>0</td>
      <td>42.037529</td>
      <td>-87.685499</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MVARNER</td>
      <td>2019-05-01T21:06:24</td>
      <td>17031809800</td>
      <td>809800</td>
      <td>6.388610e+06</td>
      <td>10293.09649</td>
      <td>POLYGON ((-87.69...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>22</td>
      <td>17</td>
      <td>31</td>
      <td>809900</td>
      <td>17031809900</td>
      <td>8099.0</td>
      <td>Census Tract 8099</td>
      <td>G5020</td>
      <td>S</td>
      <td>765553</td>
      <td>0</td>
      <td>42.037619</td>
      <td>-87.675263</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MVARNER</td>
      <td>2019-05-01T21:06:24</td>
      <td>17031809900</td>
      <td>809900</td>
      <td>8.357456e+06</td>
      <td>12018.23198</td>
      <td>POLYGON ((-87.67...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>23</td>
      <td>17</td>
      <td>31</td>
      <td>810000</td>
      <td>17031810000</td>
      <td>8100.0</td>
      <td>Census Tract 8100</td>
      <td>G5020</td>
      <td>S</td>
      <td>1108649</td>
      <td>1422820</td>
      <td>42.024770</td>
      <td>-87.669119</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MVARNER</td>
      <td>2019-05-01T21:06:24</td>
      <td>17031810000</td>
      <td>810000</td>
      <td>1.231487e+07</td>
      <td>14882.37133</td>
      <td>POLYGON ((-87.67...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Reading in the Boundary Data with a filePath. We specify the geometry on import this time.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Boundary Crosswalk</span>
<span class="n">evanston</span> <span class="o">=</span> <span class="s1">&#39;2PACX-1vSIJpLSmdQkvqJ3Wk6ONJmj_qHBgG_1naDxd0KcNyrT2LoJhqhoRSMtY1kyjy__xZ4Y8UN-tMNNAUa-&#39;</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://docs.google.com/spreadsheets/d/e/&#39;</span> <span class="o">+</span> <span class="n">evanston</span> <span class="o">+</span> <span class="s1">&#39;/pub?output=csv&#39;</span> 
<span class="n">boundsCw</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">boundsCw</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">boundsCw</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">loads</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">))</span>
<span class="n">boundsCw</span> <span class="o">=</span> <span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">boundsCw</span><span class="p">,</span> <span class="n">geometry</span><span class="o">=</span><span class="s1">&#39;geometry&#39;</span><span class="p">)</span>

<span class="c1"># file = findFile(&#39;../&#39;, &#39;boundaries-evanston-tracts-2010.geojson&#39;)</span>
<span class="c1">#boundsCw = gpd.read_file(file, geometry=&#39;geometry&#39;)</span>
<span class="n">boundsCw</span><span class="o">.</span><span class="n">columns</span>
<span class="n">boundsCw</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Index([&#39;OBJECTID&#39;, &#39;STATEFP10&#39;, &#39;COUNTYFP10&#39;, &#39;TRACTCE10&#39;, &#39;GEOID10&#39;, &#39;NAME10&#39;,
       &#39;NAMELSAD10&#39;, &#39;MTFCC10&#39;, &#39;FUNCSTAT10&#39;, &#39;ALAND10&#39;, &#39;AWATER10&#39;,
       &#39;INTPTLAT10&#39;, &#39;INTPTLON10&#39;, &#39;created_user&#39;, &#39;created_date&#39;,
       &#39;last_edited_user&#39;, &#39;last_edited_date&#39;, &#39;GEOID10num&#39;, &#39;Tract10Num&#39;,
       &#39;ShapeSTArea&#39;, &#39;ShapeSTLength&#39;, &#39;geometry&#39;],
      dtype=&#39;object&#39;)</pre>
</div>

</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fe5dab86320&gt;</pre>
</div>

</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
TkSuQmCC
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Settings for the data we will pull</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Lets put it all together now! For Cook County, Illinois</span>
<span class="n">state</span> <span class="o">=</span> <span class="s1">&#39;17&#39;</span>
<span class="n">county</span> <span class="o">=</span> <span class="s1">&#39;031&#39;</span> 
<span class="n">tract</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span>
<span class="n">tableId</span> <span class="o">=</span> <span class="s1">&#39;B08303&#39;</span>
<span class="n">years</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;17&#39;</span><span class="p">,</span><span class="s1">&#39;16&#39;</span><span class="p">,</span> <span class="s1">&#39;15&#39;</span><span class="p">]</span>
<span class="n">saveAcs</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">numer</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;001&#39;</span><span class="p">,</span> <span class="s1">&#39;002&#39;</span><span class="p">,</span> <span class="s1">&#39;003&#39;</span><span class="p">]</span>
<span class="n">denom</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;001&#39;</span><span class="p">,</span> <span class="s1">&#39;002&#39;</span><span class="p">,</span> <span class="s1">&#39;003&#39;</span><span class="p">,</span> <span class="s1">&#39;004&#39;</span><span class="p">,</span> <span class="s1">&#39;005&#39;</span><span class="p">,</span> <span class="s1">&#39;006&#39;</span><span class="p">,</span> <span class="s1">&#39;007&#39;</span><span class="p">,</span> <span class="s1">&#39;008&#39;</span><span class="p">,</span> <span class="s1">&#39;009&#39;</span><span class="p">,</span> <span class="s1">&#39;010&#39;</span><span class="p">,</span> <span class="s1">&#39;011&#39;</span> <span class="p">]</span>

<span class="n">saveAcs</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">saveCw1</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">cwlk1FileName</span> <span class="o">=</span> <span class="s1">&#39;Example_NamedCrosswalk.csv&#39;</span>
<span class="n">saveCw2</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">cwlk2FileName</span> <span class="o">=</span> <span class="s1">&#39;Example_BoundaryCrosswalk.csv&#39;</span>

<span class="n">groupBy</span> <span class="o">=</span> <span class="kc">False</span>
<span class="c1">#groupBy = &#39;CSA2010&#39;</span>
<span class="n">aggMethod</span> <span class="o">=</span> <span class="s1">&#39;sum&#39;</span>

<span class="n">namesCw</span> <span class="o">=</span> <span class="n">namesCw</span>
<span class="n">names_local_match_col</span> <span class="o">=</span> <span class="s1">&#39;tract&#39;</span>
<span class="n">names_foreign_match_col</span> <span class="o">=</span> <span class="s1">&#39;Tract10Num&#39;</span>
<span class="n">names_foreign_wanted_col</span> <span class="o">=</span> <span class="s1">&#39;INTPTLAT10&#39;</span>

<span class="n">boundsCw</span> <span class="o">=</span> <span class="n">boundsCw</span>
<span class="n">bounds_local_match_col</span> <span class="o">=</span> <span class="s1">&#39;tract&#39;</span>
<span class="n">bounds_foreign_match_col</span> <span class="o">=</span> <span class="s1">&#39;Tract10Num&#39;</span>
<span class="n">bounds_foreign_wanted_col</span> <span class="o">=</span> <span class="s1">&#39;geometry&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Download a multiple years of estimates and merge them</span>
<span class="k">def</span> <span class="nf">getAcsYears</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">county</span><span class="p">,</span> <span class="n">tract</span><span class="p">,</span> <span class="n">years</span><span class="p">,</span> 
                <span class="n">tableId</span><span class="p">,</span> <span class="n">numer</span><span class="p">,</span> <span class="n">denom</span><span class="p">,</span> 
                <span class="n">namesCw</span><span class="p">,</span> <span class="n">lcw1Match</span><span class="p">,</span> <span class="n">fcw1Match</span><span class="p">,</span> <span class="n">fcw1Want</span><span class="p">,</span> <span class="n">groupBy</span><span class="p">,</span> <span class="n">aggMethod</span><span class="p">,</span>
                <span class="n">boundsCw</span><span class="p">,</span> <span class="n">lcw2Match</span><span class="p">,</span> <span class="n">fcw2Match</span><span class="p">,</span> <span class="n">fcw2Want</span><span class="p">,</span> 
                <span class="n">saveAcs</span><span class="p">,</span> <span class="n">saveCw1</span><span class="p">,</span> <span class="n">cwlk1FileName</span><span class="p">,</span> <span class="n">saveCw2</span><span class="p">,</span> <span class="n">cwlk2FileName</span><span class="p">):</span>
  <span class="c1"># Get the data</span>
  <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">final</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
  <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">years</span><span class="p">:</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">retrieve_acs_data</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">county</span><span class="p">,</span> <span class="n">tract</span><span class="p">,</span> <span class="n">tableId</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">saveAcs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">numer</span> <span class="ow">and</span> <span class="n">denom</span><span class="p">:</span>
      <span class="c1"># Numerators </span>
      <span class="n">numerators</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
      <span class="k">for</span> <span class="n">colSubString</span> <span class="ow">in</span> <span class="n">numer</span><span class="p">:</span>
        <span class="n">colName</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">colSubString</span> <span class="ow">in</span> <span class="n">x</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> 
        <span class="n">numerators</span> <span class="o">=</span> <span class="n">addKey</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">numerators</span><span class="p">,</span> <span class="n">colName</span><span class="p">)</span>
      <span class="c1"># Denominators</span>
      <span class="n">denominators</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
      <span class="k">for</span> <span class="n">colSubString</span> <span class="ow">in</span> <span class="n">denom</span><span class="p">:</span>
        <span class="n">colName</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">colSubString</span> <span class="ow">in</span> <span class="n">x</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> 
        <span class="n">denominators</span> <span class="o">=</span> <span class="n">addKey</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">denominators</span><span class="p">,</span> <span class="n">colName</span><span class="p">)</span>
      <span class="c1"># Run the Calculation </span>
      <span class="n">fi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
      <span class="n">df</span><span class="p">[</span><span class="s1">&#39;numerator&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numerators</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
      <span class="n">df</span><span class="p">[</span><span class="s1">&#39;denominator&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">denominators</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
      <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;denominator&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">]</span> <span class="c1"># Delete Rows where the &#39;denominator&#39; column is 0</span>
      <span class="n">df</span><span class="p">[</span><span class="s1">&#39;final&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;numerator&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;denominator&#39;</span><span class="p">]</span> <span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">add_prefix</span><span class="p">(</span><span class="s1">&#39;20&#39;</span><span class="o">+</span><span class="n">year</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>
    <span class="n">newTract</span> <span class="o">=</span> <span class="s1">&#39;20&#39;</span><span class="o">+</span><span class="n">year</span><span class="o">+</span><span class="s1">&#39;_tract&#39;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="n">newTract</span><span class="p">:</span> <span class="s1">&#39;tract&#39;</span><span class="p">}</span> <span class="p">)</span>
    <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="n">count</span> <span class="o">=</span> <span class="n">count</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">final</span> <span class="o">=</span> <span class="n">df</span>
    <span class="k">else</span><span class="p">:</span> <span class="n">final</span> <span class="o">=</span> <span class="n">final</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;tract&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Table: &#39;</span> <span class="o">+</span> <span class="n">tableId</span> <span class="o">+</span> <span class="s1">&#39;, Year: &#39;</span> <span class="o">+</span> <span class="n">year</span> <span class="o">+</span> <span class="s1">&#39; recieved.&#39;</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Download Complete&#39;</span><span class="p">)</span>
  
  <span class="c1"># Merge crosswalk with the Names data</span>
  <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">namesCw</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;local boundary crosswalk matching on &#39;</span><span class="o">+</span><span class="n">lcw2Match</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;foreign boundary crosswalk matching on &#39;</span><span class="o">+</span><span class="n">fcw2Match</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Pulling from foreign boundary crosswalk &#39;</span><span class="o">+</span><span class="n">fcw2Want</span><span class="o">+</span><span class="s1">&#39; with Columns&#39;</span><span class="p">)</span>
    <span class="n">final</span> <span class="o">=</span> <span class="n">crosswalkIt</span><span class="p">(</span> <span class="n">namesCw</span><span class="p">,</span> <span class="n">final</span><span class="p">,</span> <span class="n">lcw1Match</span><span class="p">,</span> <span class="n">fcw1Match</span><span class="p">,</span> <span class="n">fcw1Want</span><span class="p">,</span> <span class="n">saveCw1</span><span class="p">,</span> <span class="n">cwlk1FileName</span> <span class="p">)</span>

  <span class="c1"># Group and Aggregate </span>
  <span class="k">if</span> <span class="n">groupBy</span><span class="p">:</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">groupBy</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Grouped&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">aggMethod</span> <span class="o">==</span> <span class="s1">&#39;sum&#39;</span><span class="p">:</span>
      <span class="n">df</span> <span class="o">=</span> <span class="n">sumInts</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">df</span> <span class="o">=</span> <span class="n">sumInts</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Aggregated&#39;</span><span class="p">)</span>
    
  <span class="c1"># Merge crosswalk with the Geom data</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;local boundary crosswalk matching on &#39;</span><span class="o">+</span><span class="n">lcw2Match</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;foreign boundary crosswalk matching on &#39;</span><span class="o">+</span><span class="n">fcw2Match</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Pulling from foreign boundary crosswalk &#39;</span><span class="o">+</span><span class="n">fcw2Want</span><span class="o">+</span><span class="s1">&#39; with Columns&#39;</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">boundsCw</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
  <span class="n">final</span> <span class="o">=</span> <span class="n">crosswalkIt</span><span class="p">(</span> <span class="n">boundsCw</span><span class="p">,</span> <span class="n">final</span><span class="p">,</span> <span class="n">lcw2Match</span><span class="p">,</span> <span class="n">fcw2Match</span><span class="p">,</span> <span class="n">fcw2Want</span><span class="p">,</span> <span class="n">saveCw2</span><span class="p">,</span> <span class="n">cwlk2FileName</span> <span class="p">)</span>
  <span class="n">final</span> <span class="o">=</span> <span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">final</span><span class="p">,</span> <span class="n">geometry</span><span class="o">=</span><span class="n">fcw2Want</span><span class="p">)</span>
  
  <span class="k">return</span> <span class="n">final</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fnl</span> <span class="o">=</span> <span class="n">getAcsYears</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">county</span><span class="p">,</span> <span class="n">tract</span><span class="p">,</span> <span class="n">years</span><span class="p">,</span> <span class="n">tableId</span><span class="p">,</span> <span class="n">numer</span><span class="p">,</span> <span class="n">denom</span><span class="p">,</span> 
                  <span class="n">namesCw</span><span class="p">,</span> <span class="n">names_local_match_col</span><span class="p">,</span> <span class="n">names_foreign_match_col</span><span class="p">,</span> <span class="n">names_foreign_wanted_col</span><span class="p">,</span> <span class="n">groupBy</span><span class="p">,</span> <span class="n">aggMethod</span><span class="p">,</span>
                  <span class="n">boundsCw</span><span class="p">,</span> <span class="n">bounds_local_match_col</span><span class="p">,</span> <span class="n">bounds_foreign_match_col</span><span class="p">,</span> <span class="n">bounds_foreign_wanted_col</span><span class="p">,</span> 
                  <span class="n">saveAcs</span><span class="p">,</span> <span class="n">saveCw1</span><span class="p">,</span> <span class="n">cwlk1FileName</span><span class="p">,</span> <span class="n">saveCw2</span><span class="p">,</span> <span class="n">cwlk2FileName</span><span class="p">)</span>
<span class="n">fnl</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">fnl</span><span class="o">.</span><span class="n">columns</span>
<span class="n">fnl</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Number of Columns 13
Table: B08303, Year: 17 recieved.
Number of Columns 13
Table: B08303, Year: 16 recieved.
Number of Columns 13
Table: B08303, Year: 15 recieved.
Download Complete
local boundary crosswalk matching on tract
foreign boundary crosswalk matching on Tract10Num
Pulling from foreign boundary crosswalk geometry with Columns
Local Column Values Not Matched 
[ 10000  10100  10201 ... 843700 843800 843900]
1298

Crosswalk Unique Column Values
[809600 809700 809800 809900 810000 810100 810200 810301 810302 808702
 808800 808900 809000 809100 809200 809300 809400 809500]
SavingCrosswalk
Example_NamedCrosswalk.csv
local boundary crosswalk matching on tract
foreign boundary crosswalk matching on Tract10Num
Pulling from foreign boundary crosswalk geometry with Columns
Index([&#39;OBJECTID&#39;, &#39;STATEFP10&#39;, &#39;COUNTYFP10&#39;, &#39;TRACTCE10&#39;, &#39;GEOID10&#39;, &#39;NAME10&#39;,
       &#39;NAMELSAD10&#39;, &#39;MTFCC10&#39;, &#39;FUNCSTAT10&#39;, &#39;ALAND10&#39;, &#39;AWATER10&#39;,
       &#39;INTPTLAT10&#39;, &#39;INTPTLON10&#39;, &#39;created_user&#39;, &#39;created_date&#39;,
       &#39;last_edited_user&#39;, &#39;last_edited_date&#39;, &#39;GEOID10num&#39;, &#39;Tract10Num&#39;,
       &#39;ShapeSTArea&#39;, &#39;ShapeSTLength&#39;, &#39;geometry&#39;],
      dtype=&#39;object&#39;)
SavingCrosswalk
Example_BoundaryCrosswalk.csv
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fe5da940e80&gt;</pre>
</div>

</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Index([&#39;2017_B08303_001E_Total&#39;, &#39;2017_B08303_002E_Total_Less_than_5_minutes&#39;,
       &#39;2017_B08303_003E_Total_5_to_9_minutes&#39;,
       &#39;2017_B08303_004E_Total_10_to_14_minutes&#39;,
       &#39;2017_B08303_005E_Total_15_to_19_minutes&#39;,
       &#39;2017_B08303_006E_Total_20_to_24_minutes&#39;,
       &#39;2017_B08303_007E_Total_25_to_29_minutes&#39;,
       &#39;2017_B08303_008E_Total_30_to_34_minutes&#39;,
       &#39;2017_B08303_009E_Total_35_to_39_minutes&#39;,
       &#39;2017_B08303_010E_Total_40_to_44_minutes&#39;,
       &#39;2017_B08303_011E_Total_45_to_59_minutes&#39;,
       &#39;2017_B08303_012E_Total_60_to_89_minutes&#39;,
       &#39;2017_B08303_013E_Total_90_or_more_minutes&#39;, &#39;2017_state&#39;,
       &#39;2017_county&#39;, &#39;tract&#39;, &#39;2017_numerator&#39;, &#39;2017_denominator&#39;,
       &#39;2017_final&#39;, &#39;2016_B08303_001E_Total&#39;,
       &#39;2016_B08303_002E_Total_Less_than_5_minutes&#39;,
       &#39;2016_B08303_003E_Total_5_to_9_minutes&#39;,
       &#39;2016_B08303_004E_Total_10_to_14_minutes&#39;,
       &#39;2016_B08303_005E_Total_15_to_19_minutes&#39;,
       &#39;2016_B08303_006E_Total_20_to_24_minutes&#39;,
       &#39;2016_B08303_007E_Total_25_to_29_minutes&#39;,
       &#39;2016_B08303_008E_Total_30_to_34_minutes&#39;,
       &#39;2016_B08303_009E_Total_35_to_39_minutes&#39;,
       &#39;2016_B08303_010E_Total_40_to_44_minutes&#39;,
       &#39;2016_B08303_011E_Total_45_to_59_minutes&#39;,
       &#39;2016_B08303_012E_Total_60_to_89_minutes&#39;,
       &#39;2016_B08303_013E_Total_90_or_more_minutes&#39;, &#39;2016_state&#39;,
       &#39;2016_county&#39;, &#39;2016_numerator&#39;, &#39;2016_denominator&#39;, &#39;2016_final&#39;,
       &#39;2015_B08303_001E_Total&#39;, &#39;2015_B08303_002E_Total_Less_than_5_minutes&#39;,
       &#39;2015_B08303_003E_Total_5_to_9_minutes&#39;,
       &#39;2015_B08303_004E_Total_10_to_14_minutes&#39;,
       &#39;2015_B08303_005E_Total_15_to_19_minutes&#39;,
       &#39;2015_B08303_006E_Total_20_to_24_minutes&#39;,
       &#39;2015_B08303_007E_Total_25_to_29_minutes&#39;,
       &#39;2015_B08303_008E_Total_30_to_34_minutes&#39;,
       &#39;2015_B08303_009E_Total_35_to_39_minutes&#39;,
       &#39;2015_B08303_010E_Total_40_to_44_minutes&#39;,
       &#39;2015_B08303_011E_Total_45_to_59_minutes&#39;,
       &#39;2015_B08303_012E_Total_60_to_89_minutes&#39;,
       &#39;2015_B08303_013E_Total_90_or_more_minutes&#39;, &#39;2015_state&#39;,
       &#39;2015_county&#39;, &#39;2015_numerator&#39;, &#39;2015_denominator&#39;, &#39;2015_final&#39;,
       &#39;INTPTLAT10&#39;, &#39;geometry&#39;],
      dtype=&#39;object&#39;)</pre>
</div>

</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>2017_B08303_001E_Total</th>
      <th>2017_B08303_002E_Total_Less_than_5_minutes</th>
      <th>2017_B08303_003E_Total_5_to_9_minutes</th>
      <th>2017_B08303_004E_Total_10_to_14_minutes</th>
      <th>2017_B08303_005E_Total_15_to_19_minutes</th>
      <th>2017_B08303_006E_Total_20_to_24_minutes</th>
      <th>2017_B08303_007E_Total_25_to_29_minutes</th>
      <th>2017_B08303_008E_Total_30_to_34_minutes</th>
      <th>2017_B08303_009E_Total_35_to_39_minutes</th>
      <th>2017_B08303_010E_Total_40_to_44_minutes</th>
      <th>2017_B08303_011E_Total_45_to_59_minutes</th>
      <th>2017_B08303_012E_Total_60_to_89_minutes</th>
      <th>2017_B08303_013E_Total_90_or_more_minutes</th>
      <th>2017_state</th>
      <th>2017_county</th>
      <th>tract</th>
      <th>2017_numerator</th>
      <th>2017_denominator</th>
      <th>2017_final</th>
      <th>2016_B08303_001E_Total</th>
      <th>2016_B08303_002E_Total_Less_than_5_minutes</th>
      <th>2016_B08303_003E_Total_5_to_9_minutes</th>
      <th>2016_B08303_004E_Total_10_to_14_minutes</th>
      <th>2016_B08303_005E_Total_15_to_19_minutes</th>
      <th>2016_B08303_006E_Total_20_to_24_minutes</th>
      <th>2016_B08303_007E_Total_25_to_29_minutes</th>
      <th>2016_B08303_008E_Total_30_to_34_minutes</th>
      <th>2016_B08303_009E_Total_35_to_39_minutes</th>
      <th>2016_B08303_010E_Total_40_to_44_minutes</th>
      <th>2016_B08303_011E_Total_45_to_59_minutes</th>
      <th>2016_B08303_012E_Total_60_to_89_minutes</th>
      <th>2016_B08303_013E_Total_90_or_more_minutes</th>
      <th>2016_state</th>
      <th>2016_county</th>
      <th>2016_numerator</th>
      <th>2016_denominator</th>
      <th>2016_final</th>
      <th>2015_B08303_001E_Total</th>
      <th>2015_B08303_002E_Total_Less_than_5_minutes</th>
      <th>2015_B08303_003E_Total_5_to_9_minutes</th>
      <th>2015_B08303_004E_Total_10_to_14_minutes</th>
      <th>2015_B08303_005E_Total_15_to_19_minutes</th>
      <th>2015_B08303_006E_Total_20_to_24_minutes</th>
      <th>2015_B08303_007E_Total_25_to_29_minutes</th>
      <th>2015_B08303_008E_Total_30_to_34_minutes</th>
      <th>2015_B08303_009E_Total_35_to_39_minutes</th>
      <th>2015_B08303_010E_Total_40_to_44_minutes</th>
      <th>2015_B08303_011E_Total_45_to_59_minutes</th>
      <th>2015_B08303_012E_Total_60_to_89_minutes</th>
      <th>2015_B08303_013E_Total_90_or_more_minutes</th>
      <th>2015_state</th>
      <th>2015_county</th>
      <th>2015_numerator</th>
      <th>2015_denominator</th>
      <th>2015_final</th>
      <th>INTPTLAT10</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>166</th>
      <td>3143</td>
      <td>0</td>
      <td>25</td>
      <td>205</td>
      <td>298</td>
      <td>443</td>
      <td>322</td>
      <td>292</td>
      <td>207</td>
      <td>238</td>
      <td>368</td>
      <td>667</td>
      <td>78</td>
      <td>17</td>
      <td>31</td>
      <td>810200</td>
      <td>3143</td>
      <td>4728</td>
      <td>66.476311</td>
      <td>3012</td>
      <td>41</td>
      <td>48</td>
      <td>255</td>
      <td>371</td>
      <td>387</td>
      <td>340</td>
      <td>245</td>
      <td>221</td>
      <td>260</td>
      <td>360</td>
      <td>425</td>
      <td>59</td>
      <td>17</td>
      <td>31</td>
      <td>3012</td>
      <td>4699</td>
      <td>64.098744</td>
      <td>2846</td>
      <td>44</td>
      <td>26</td>
      <td>276</td>
      <td>368</td>
      <td>370</td>
      <td>260</td>
      <td>287</td>
      <td>80</td>
      <td>212</td>
      <td>375</td>
      <td>480</td>
      <td>68</td>
      <td>17</td>
      <td>31</td>
      <td>2846</td>
      <td>4477</td>
      <td>63.569354</td>
      <td>42.022822</td>
      <td>POLYGON ((-87.69...</td>
    </tr>
    <tr>
      <th>428</th>
      <td>1949</td>
      <td>36</td>
      <td>187</td>
      <td>236</td>
      <td>356</td>
      <td>237</td>
      <td>103</td>
      <td>194</td>
      <td>9</td>
      <td>126</td>
      <td>168</td>
      <td>208</td>
      <td>89</td>
      <td>17</td>
      <td>31</td>
      <td>809400</td>
      <td>1949</td>
      <td>3298</td>
      <td>59.096422</td>
      <td>2061</td>
      <td>31</td>
      <td>243</td>
      <td>357</td>
      <td>395</td>
      <td>185</td>
      <td>79</td>
      <td>175</td>
      <td>23</td>
      <td>126</td>
      <td>225</td>
      <td>160</td>
      <td>62</td>
      <td>17</td>
      <td>31</td>
      <td>2061</td>
      <td>3526</td>
      <td>58.451503</td>
      <td>1963</td>
      <td>22</td>
      <td>186</td>
      <td>336</td>
      <td>357</td>
      <td>128</td>
      <td>80</td>
      <td>204</td>
      <td>20</td>
      <td>133</td>
      <td>250</td>
      <td>182</td>
      <td>65</td>
      <td>17</td>
      <td>31</td>
      <td>1963</td>
      <td>3276</td>
      <td>59.920635</td>
      <td>42.044784</td>
      <td>POLYGON ((-87.67...</td>
    </tr>
    <tr>
      <th>435</th>
      <td>1523</td>
      <td>21</td>
      <td>72</td>
      <td>212</td>
      <td>133</td>
      <td>73</td>
      <td>7</td>
      <td>95</td>
      <td>108</td>
      <td>159</td>
      <td>389</td>
      <td>198</td>
      <td>56</td>
      <td>17</td>
      <td>31</td>
      <td>809900</td>
      <td>1523</td>
      <td>2136</td>
      <td>71.301498</td>
      <td>1645</td>
      <td>19</td>
      <td>51</td>
      <td>236</td>
      <td>145</td>
      <td>89</td>
      <td>16</td>
      <td>113</td>
      <td>96</td>
      <td>129</td>
      <td>475</td>
      <td>218</td>
      <td>58</td>
      <td>17</td>
      <td>31</td>
      <td>1645</td>
      <td>2314</td>
      <td>71.089023</td>
      <td>1595</td>
      <td>6</td>
      <td>52</td>
      <td>207</td>
      <td>217</td>
      <td>82</td>
      <td>65</td>
      <td>129</td>
      <td>51</td>
      <td>56</td>
      <td>462</td>
      <td>212</td>
      <td>56</td>
      <td>17</td>
      <td>31</td>
      <td>1595</td>
      <td>2353</td>
      <td>67.785805</td>
      <td>42.037619</td>
      <td>POLYGON ((-87.67...</td>
    </tr>
    <tr>
      <th>565</th>
      <td>1565</td>
      <td>15</td>
      <td>145</td>
      <td>127</td>
      <td>269</td>
      <td>162</td>
      <td>27</td>
      <td>107</td>
      <td>45</td>
      <td>113</td>
      <td>280</td>
      <td>246</td>
      <td>29</td>
      <td>17</td>
      <td>31</td>
      <td>809100</td>
      <td>1565</td>
      <td>2417</td>
      <td>64.749690</td>
      <td>1552</td>
      <td>40</td>
      <td>165</td>
      <td>112</td>
      <td>264</td>
      <td>199</td>
      <td>3</td>
      <td>99</td>
      <td>43</td>
      <td>119</td>
      <td>258</td>
      <td>207</td>
      <td>43</td>
      <td>17</td>
      <td>31</td>
      <td>1552</td>
      <td>2434</td>
      <td>63.763353</td>
      <td>1496</td>
      <td>43</td>
      <td>197</td>
      <td>143</td>
      <td>278</td>
      <td>143</td>
      <td>2</td>
      <td>83</td>
      <td>28</td>
      <td>81</td>
      <td>247</td>
      <td>200</td>
      <td>51</td>
      <td>17</td>
      <td>31</td>
      <td>1496</td>
      <td>2385</td>
      <td>62.725367</td>
      <td>42.059352</td>
      <td>POLYGON ((-87.71...</td>
    </tr>
    <tr>
      <th>568</th>
      <td>1553</td>
      <td>57</td>
      <td>118</td>
      <td>121</td>
      <td>203</td>
      <td>127</td>
      <td>88</td>
      <td>150</td>
      <td>34</td>
      <td>75</td>
      <td>310</td>
      <td>259</td>
      <td>11</td>
      <td>17</td>
      <td>31</td>
      <td>809000</td>
      <td>1553</td>
      <td>2417</td>
      <td>64.253206</td>
      <td>1512</td>
      <td>61</td>
      <td>126</td>
      <td>136</td>
      <td>190</td>
      <td>139</td>
      <td>87</td>
      <td>102</td>
      <td>31</td>
      <td>78</td>
      <td>321</td>
      <td>225</td>
      <td>16</td>
      <td>17</td>
      <td>31</td>
      <td>1512</td>
      <td>2353</td>
      <td>64.258394</td>
      <td>1583</td>
      <td>66</td>
      <td>118</td>
      <td>179</td>
      <td>207</td>
      <td>190</td>
      <td>96</td>
      <td>102</td>
      <td>26</td>
      <td>80</td>
      <td>293</td>
      <td>210</td>
      <td>16</td>
      <td>17</td>
      <td>31</td>
      <td>1583</td>
      <td>2541</td>
      <td>62.298308</td>
      <td>42.059755</td>
      <td>POLYGON ((-87.72...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Data was successfully merged across all years and geometry.</p>
<p>Now we want the tractname, geometry, and the specific column we want to make a gif from.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Get only the results tab</span>
<span class="n">td</span> <span class="o">=</span> <span class="n">fnl</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="s2">&quot;final|tract|geometry&quot;</span><span class="p">)</span>
<span class="n">td</span> <span class="o">=</span> <span class="n">td</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">columns</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">td</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="c1"># Get Min Max</span>
<span class="n">mins</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">maxs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">td</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
  <span class="k">if</span> <span class="n">col</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;state&#39;</span><span class="p">,</span> <span class="s1">&#39;county&#39;</span><span class="p">,</span> <span class="s1">&#39;tract&#39;</span><span class="p">,</span> <span class="s1">&#39;geometry&#39;</span><span class="p">]</span> <span class="p">:</span>
    <span class="k">pass</span>
  <span class="k">else</span><span class="p">:</span> 
    <span class="n">mins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">td</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>
    <span class="n">maxs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">td</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mins</span><span class="p">,</span> <span class="n">maxs</span><span class="p">)</span>

<span class="c1"># set the min and max range for the choropleth map</span>
<span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">mins</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">maxs</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>2015_final</th>
      <th>2016_final</th>
      <th>2017_final</th>
      <th>geometry</th>
      <th>tract</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>166</th>
      <td>63.569354</td>
      <td>64.098744</td>
      <td>66.476311</td>
      <td>POLYGON ((-87.69...</td>
      <td>810200</td>
    </tr>
    <tr>
      <th>428</th>
      <td>59.920635</td>
      <td>58.451503</td>
      <td>59.096422</td>
      <td>POLYGON ((-87.67...</td>
      <td>809400</td>
    </tr>
    <tr>
      <th>435</th>
      <td>67.785805</td>
      <td>71.089023</td>
      <td>71.301498</td>
      <td>POLYGON ((-87.67...</td>
      <td>809900</td>
    </tr>
    <tr>
      <th>565</th>
      <td>62.725367</td>
      <td>63.763353</td>
      <td>64.749690</td>
      <td>POLYGON ((-87.71...</td>
      <td>809100</td>
    </tr>
    <tr>
      <th>568</th>
      <td>62.298308</td>
      <td>64.258394</td>
      <td>64.253206</td>
      <td>POLYGON ((-87.72...</td>
      <td>809000</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>[53.71589840075258, 53.786342123056116, 54.01844532279315] [67.78580535486613, 71.08902333621435, 71.30149812734082]
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">merged</span> <span class="o">=</span> <span class="n">td</span>   
<span class="n">fileNames</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">annotation</span> <span class="o">=</span> <span class="s1">&#39;Source: Baltimore Neighborhood Indicators Allianace - Jacob France Institute, 2019&#39;</span>
<span class="n">saveGifAs</span> <span class="o">=</span> <span class="s1">&#39;./TESTGIF.gif&#39;</span>
<span class="n">labelBounds</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">specialLabelCol</span> <span class="o">=</span> <span class="kc">False</span>
<span class="c1"># For each column</span>
<span class="k">for</span> <span class="n">indx</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">merged</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">col</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;state&#39;</span><span class="p">,</span> <span class="s1">&#39;county&#39;</span><span class="p">,</span> <span class="s1">&#39;tract&#39;</span><span class="p">,</span> <span class="s1">&#39;geometry&#39;</span><span class="p">]</span> <span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span> 
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Col Index: &#39;</span><span class="p">,</span> <span class="n">indx</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Col Name: &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="p">)</span>

        <span class="c1"># create map, UDPATE: added plt.Normalize to keep the legend range the same for all maps</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">merged</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Blues&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> 
           <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;0.8&#39;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
           <span class="n">legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span> 
        <span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fig Created&#39;</span><span class="p">)</span>
        
        <span class="c1"># https://stackoverflow.com/questions/38899190/geopandas-label-polygons</span>
        <span class="k">if</span> <span class="n">labelBounds</span><span class="p">:</span>
          <span class="n">labelColumn</span> <span class="o">=</span> <span class="n">col</span>
          <span class="k">if</span> <span class="n">specialLabelCol</span><span class="p">:</span> <span class="n">labelColumn</span> <span class="o">=</span> <span class="n">specialLabelCol</span>
          <span class="n">merged</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">fig</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="n">labelColumn</span><span class="p">],</span> <span class="n">xy</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
        
        <span class="c1"># remove axis of chart and set title</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
        <span class="n">col</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_final&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="c1"># str(col.replace(&quot;_&quot;, &quot; &quot;)[12:])</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">col</span><span class="p">),</span> <span class="n">fontdict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;fontsize&#39;</span><span class="p">:</span> <span class="s1">&#39;10&#39;</span><span class="p">,</span> <span class="s1">&#39;fontweight&#39;</span> <span class="p">:</span> <span class="s1">&#39;3&#39;</span><span class="p">})</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fig Titled&#39;</span><span class="p">)</span>
        
        <span class="c1"># create an annotation for the  data source</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">annotation</span><span class="p">,</span>
               <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">.</span><span class="mi">08</span><span class="p">),</span> <span class="n">xycoords</span><span class="o">=</span><span class="s1">&#39;figure fraction&#39;</span><span class="p">,</span>
               <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span>
               <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#555555&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fig annotated&#39;</span><span class="p">)</span>
        
        <span class="c1"># this will save the figure as a high-res png in the output path. you can also save as svg if you prefer.</span>
        <span class="c1"># filepath = os.path.join(output_path, image_name)</span>
        <span class="n">image_name</span> <span class="o">=</span> <span class="s1">&#39;test_&#39;</span><span class="o">+</span><span class="n">col</span><span class="o">+</span><span class="s1">&#39;.jpg&#39;</span>
        <span class="n">fileNames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image_name</span><span class="p">)</span>
        <span class="n">chart</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span>
        <span class="c1"># fig.savefig(map_export.png, dpi=300)</span>
        <span class="n">chart</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">chart</span><span class="p">)</span>
        
<span class="n">images</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">fileNames</span><span class="p">:</span>
    <span class="n">images</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">imageio</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
<span class="n">imageio</span><span class="o">.</span><span class="n">mimsave</span><span class="p">(</span><span class="n">saveGifAs</span><span class="p">,</span> <span class="n">images</span><span class="p">,</span> <span class="n">fps</span><span class="o">=.</span><span class="mi">5</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Col Index:  0
Col Name: 2015_final
Fig Created
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>166     Annotation(-87.6...
428     Annotation(-87.6...
435     Annotation(-87.6...
565     Annotation(-87.7...
568     Annotation(-87.7...
569     Annotation(-87.6...
648     Annotation(-87.6...
965     Annotation(-87.6...
1047    Annotation(-87.6...
1075    Annotation(-87.7...
1076    Annotation(-87.6...
1077    Annotation(-87.6...
1078    Annotation(-87.7...
1093    Annotation(-87.6...
1174    Annotation(-87.6...
1271    Annotation(-87.6...
1303    Annotation(-87.6...
1304    Annotation(-87.6...
dtype: object</pre>
</div>

</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(-87.73588219621746, -87.66163225165677, 42.01650811684183, 42.07438709638502)</pre>
</div>

</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Text(0.5, 1.0, &#39;2015&#39;)</pre>
</div>

</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Fig Titled
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Text(0.1, 0.08, &#39;Source: Baltimore Neighborhood Indicators Allianace - Jacob France Institute, 2019&#39;)</pre>
</div>

</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Fig annotated
Col Index:  1
Col Name: 2016_final
Fig Created
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>166     Annotation(-87.6...
428     Annotation(-87.6...
435     Annotation(-87.6...
565     Annotation(-87.7...
568     Annotation(-87.7...
569     Annotation(-87.6...
648     Annotation(-87.6...
965     Annotation(-87.6...
1047    Annotation(-87.6...
1075    Annotation(-87.7...
1076    Annotation(-87.6...
1077    Annotation(-87.6...
1078    Annotation(-87.7...
1093    Annotation(-87.6...
1174    Annotation(-87.6...
1271    Annotation(-87.6...
1303    Annotation(-87.6...
1304    Annotation(-87.6...
dtype: object</pre>
</div>

</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(-87.73588219621746, -87.66163225165677, 42.01650811684183, 42.07438709638502)</pre>
</div>

</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Text(0.5, 1.0, &#39;2016&#39;)</pre>
</div>

</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Fig Titled
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Text(0.1, 0.08, &#39;Source: Baltimore Neighborhood Indicators Allianace - Jacob France Institute, 2019&#39;)</pre>
</div>

</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Fig annotated
Col Index:  2
Col Name: 2017_final
Fig Created
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>166     Annotation(-87.6...
428     Annotation(-87.6...
435     Annotation(-87.6...
565     Annotation(-87.7...
568     Annotation(-87.7...
569     Annotation(-87.6...
648     Annotation(-87.6...
965     Annotation(-87.6...
1047    Annotation(-87.6...
1075    Annotation(-87.7...
1076    Annotation(-87.6...
1077    Annotation(-87.6...
1078    Annotation(-87.7...
1093    Annotation(-87.6...
1174    Annotation(-87.6...
1271    Annotation(-87.6...
1303    Annotation(-87.6...
1304    Annotation(-87.6...
dtype: object</pre>
</div>

</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(-87.73588219621746, -87.66163225165677, 42.01650811684183, 42.07438709638502)</pre>
</div>

</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Text(0.5, 1.0, &#39;2017&#39;)</pre>
</div>

</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Fig Titled
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Text(0.1, 0.08, &#39;Source: Baltimore Neighborhood Indicators Allianace - Jacob France Institute, 2019&#39;)</pre>
</div>

</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Fig annotated
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Optional:-Prepair-Google-Drive-Data-Folder/-Drive-Import-Operations">Optional: Prepair Google Drive Data Folder/ Drive Import Operations<a class="anchor-link" href="#Optional:-Prepair-Google-Drive-Data-Folder/-Drive-Import-Operations"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Access Google Drive directories:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#https://colab.research.google.com/github/jakevdp/PythonDataScienceHandbook/blob/master/notebooks/01.05-IPython-And-Shell-Commands.ipynb</span>

<span class="kn">from</span> <span class="nn">google.colab</span> <span class="k">import</span> <span class="n">drive</span>
<span class="n">drive</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;/content/drive&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can also import file directly into a temporary folder in a public folder</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Import Data (data.csv file)</span>
<span class="kn">from</span> <span class="nn">google.colab</span> <span class="k">import</span> <span class="n">files</span>

<span class="c1"># Just uncommment this line and run the cell</span>
<span class="c1"># uploaded = files.upload()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now lets explore the file system using the built in terminal:</p>
<p>By default you are positioned in the ./content/ folder.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># From the /content folder, I navigate to my Drive Data Folder </span>
<span class="n">cd</span> <span class="o">./</span><span class="n">drive</span><span class="o">/</span><span class="n">My</span> <span class="n">Drive</span><span class="o">/</span><span class="n">colabs</span><span class="o">/</span><span class="n">DATA</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>/content/drive/My Drive/colabs/DATA
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ls</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre> avocado.csv
 <span class="ansi-blue-intense-fg ansi-bold">baltimore-births</span>/
 boundaries-baltimore-communities-NoWater-2010.geojson
 boundaries-baltimore-neighborhoods.csv
 boundaries-baltimore-neighborhoods.geojson
 boundaries-baltimore-neighborhoods.json
 boundaries--baltimore-tracts-NoWater-2010.geojson
 boundaries-evanston-tracts-2010.csv
 boundaries-evanston-tracts-2010.geojson
 boundaries-evanston-tracts-2010.gsheet
 boundaries-maryland_census-tracts-2010.csv
 boundaries-maryland_census-tracts-2010.geojson
 boundaries-maryland-counties.csv
 boundaries-maryland-counties.geojson
 boundaries-moco-census-tracts-2010.csv
 boundaries-moco-census-tracts-2010.geojson
 crosswalk-census-communities-2010.gsheet
 crosswalk-matched-CSA2010-to-CSA-pulling-geometry.csv
 crosswalk-matched-tract-to-TRACT2010-pulling-CSA2010.csv
 crosswalk-matched-tract-to-TRACTCE10-pulling-geometry.csv
 dashboardDataColumnDescriptions.csv
 dashboardDataColumnDescriptions.gsheet
 dashboardData.csv
 dashboardData.gsheet
 <span class="ansi-blue-intense-fg ansi-bold">exemptions</span>/
&#39;Grid view.csv&#39;
 iw.csv
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># And now (for fun) I want to list out all the geojson files in the folder</span>
<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s2">&quot;./&quot;</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.geojson&quot;</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>boundaries-evanston-tracts-2010.geojson
boundaries-moco-census-tracts-2010.geojson
boundaries-maryland-counties.geojson
boundaries-maryland_census-tracts-2010.geojson
boundaries-baltimore-neighborhoods.geojson
boundaries-baltimore-communities-NoWater-2010.geojson
boundaries--baltimore-tracts-NoWater-2010.geojson
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The next two function will help navigating the file directories:</p>
<ul>
<li>findFile(): Find a Relative Path to a File given its filename</li>
<li>addPath(): To 'import' a script you wrote, you must first map its filepath into the sys. </li>
<li>The addPath() function uses findFile() and accepts a filename as its parameter.</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># @title Run This Cell: addPath() findFile()</span>
    
<span class="c1"># Find Relative Path to Files</span>
<span class="k">def</span> <span class="nf">findFile</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">d</span><span class="p">,</span> <span class="n">subD</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">root</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{1}</span><span class="s2">/</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
            <span class="k">break</span> 

<span class="c1"># To &#39;import&#39; a script you wrote, map its filepath into the sys</span>
<span class="k">def</span> <span class="nf">addPath</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span> <span class="n">findFile</span><span class="p">(</span> <span class="s1">&#39;./&#39;</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span> <span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

